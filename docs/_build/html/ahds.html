

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ahds package &mdash; ahds 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="ahds" href="overview.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ahds
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html"><code class="docutils literal notranslate"><span class="pre">ahds</span></code></a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">ahds</span></code> package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-ahds.grammar"><code class="docutils literal notranslate"><span class="pre">ahds.grammar</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-ahds.header"><code class="docutils literal notranslate"><span class="pre">ahds.header</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-ahds.data_stream"><code class="docutils literal notranslate"><span class="pre">ahds.data_stream</span></code> module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ahds</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li><code class="docutils literal notranslate"><span class="pre">ahds</span></code> package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/ahds.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-ahds">
<span id="ahds-package"></span><h1><code class="docutils literal notranslate"><span class="pre">ahds</span></code> package<a class="headerlink" href="#module-ahds" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="ahds.AmiraFile">
<em class="property">class </em><code class="descclassname">ahds.</code><code class="descname">AmiraFile</code><span class="sig-paren">(</span><em>fn</em>, <em>load_streams=True</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds.html#AmiraFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.AmiraFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.core.Block</span></code></p>
<p>Main entry point for working with Amira files</p>
<dl class="method">
<dt id="ahds.AmiraFile.read">
<code class="descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds.html#AmiraFile.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.AmiraFile.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the data streams if they are not read yet</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ahds.AmiraHeader">
<em class="property">class </em><code class="descclassname">ahds.</code><code class="descname">AmiraHeader</code><span class="sig-paren">(</span><em>fn</em>, <em>load_streams=True</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/header.html#AmiraHeader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.AmiraHeader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.core.Block</span></code></p>
<p>Class to encapsulate Amira metadata and accessors to amria data streams</p>
<dl class="method">
<dt id="ahds.AmiraHeader.data_pointers">
<code class="descname">data_pointers</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/header.html#AmiraHeader.data_pointers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.AmiraHeader.data_pointers" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of data pointers together with a name, data type, dimension, 
index, format and length</p>
<p>NOTE: deprecated access the data defnitions for each data array through the corresponding attributes
eg.: ah.Nodes.Coordinates instead of ah.data_pointers.data_pointer_1 ah.Tetrahedra.Nodes instead of 
ah.data_pointers.data_pointer_2 etc.</p>
</dd></dl>

<dl class="method">
<dt id="ahds.AmiraHeader.definitions">
<code class="descname">definitions</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/header.html#AmiraHeader.definitions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.AmiraHeader.definitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Definitions consist of a key-value pair specified just after the 
designation preceded by the key-word ‘define’</p>
<p>NOTE: this property is deprecated access the corresponding attributes directly
eg. ah.Nodes instead of ah.definitions.Nodes or ah.Tetrahedra instead of ah.defintions.Tetrahedra</p>
</dd></dl>

<dl class="method">
<dt id="ahds.AmiraHeader.designation">
<code class="descname">designation</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/header.html#AmiraHeader.designation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.AmiraHeader.designation" title="Permalink to this definition">¶</a></dt>
<dd><p>Designation of the Amira file defined in the first row</p>
<p>Designations consist of some or all of the following data:</p>
<ul class="simple">
<li>filetype e.g. <code class="docutils literal notranslate"><span class="pre">AmiraMesh</span></code> or <code class="docutils literal notranslate"><span class="pre">HyperSurface</span></code></li>
<li>dimensions e.g. <code class="docutils literal notranslate"><span class="pre">3D</span></code></li>
<li>format e.g. <code class="docutils literal notranslate"><span class="pre">BINARY-LITTLE-ENDIAN</span></code></li>
<li>version e.g. <code class="docutils literal notranslate"><span class="pre">2.1</span></code></li>
<li>extra format e.g. <code class="docutils literal notranslate"><span class="pre">&lt;hxsurface&gt;</span></code></li>
</ul>
<p>NOTE: this property is deprecated use the corresponding attributes of the AmiraHeader
instead to access the above informations</p>
</dd></dl>

<dl class="classmethod">
<dt id="ahds.AmiraHeader.from_file">
<em class="property">classmethod </em><code class="descname">from_file</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/header.html#AmiraHeader.from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.AmiraHeader.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Deprecated classmethod</p>
</dd></dl>

<dl class="method">
<dt id="ahds.AmiraHeader.load">
<code class="descname">load</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/header.html#AmiraHeader.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.AmiraHeader.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Public loading method</p>
</dd></dl>

</dd></dl>

<div class="section" id="module-ahds.grammar">
<span id="ahds-grammar-module"></span><h2><code class="docutils literal notranslate"><span class="pre">ahds.grammar</span></code> module<a class="headerlink" href="#module-ahds.grammar" title="Permalink to this headline">¶</a></h2>
<p>Grammar to parse headers in Amira (R) files</p>
<dl class="function">
<dt id="ahds.grammar.detect_format">
<code class="descclassname">ahds.grammar.</code><code class="descname">detect_format</code><span class="sig-paren">(</span><em>fn</em>, <em>format_bytes=50</em>, <em>verbose=False</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/grammar.html#detect_format"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.grammar.detect_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect Amira (R) file format (AmiraMesh or HyperSurface)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – file name</li>
<li><strong>format_bytes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – number of bytes in which to search for the format [default: 50]</li>
<li><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – verbose (default) or not</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return str file_format:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first last">either <code class="docutils literal notranslate"><span class="pre">AmiraMesh</span></code> or <code class="docutils literal notranslate"><span class="pre">HyperSurface</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ahds.grammar.get_header">
<code class="descclassname">ahds.grammar.</code><code class="descname">get_header</code><span class="sig-paren">(</span><em>fn</em>, <em>file_format</em>, <em>header_bytes=20000</em>, <em>verbose=False</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/grammar.html#get_header"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.grammar.get_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply rules for detecting the boundary of the header</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – file name</li>
<li><strong>file_format</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – either <code class="docutils literal notranslate"><span class="pre">AmiraMesh</span></code> or <code class="docutils literal notranslate"><span class="pre">HyperSurface</span></code></li>
<li><strong>header_bytes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – number of bytes in which to search for the header [default: 20000]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return str data:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first last">the header as per the <code class="docutils literal notranslate"><span class="pre">file_format</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ahds.grammar.get_parsed_data">
<code class="descclassname">ahds.grammar.</code><code class="descname">get_parsed_data</code><span class="sig-paren">(</span><em>fn</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/grammar.html#get_parsed_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.grammar.get_parsed_data" title="Permalink to this definition">¶</a></dt>
<dd><p>All above functions as a single function</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – file name</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return tuple(list,int) parsed_data,header_length:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">structured metadata and total number of header bytes</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ahds.grammar.parse_header">
<code class="descclassname">ahds.grammar.</code><code class="descname">parse_header</code><span class="sig-paren">(</span><em>data</em>, <em>verbose=False</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/grammar.html#parse_header"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.grammar.parse_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the data using the grammar specified in this module</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – delimited data to be parsed for metadata</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return list parsed_data:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">structured metadata</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-ahds.header">
<span id="ahds-header-module"></span><h2><code class="docutils literal notranslate"><span class="pre">ahds.header</span></code> module<a class="headerlink" href="#module-ahds.header" title="Permalink to this headline">¶</a></h2>
<p>Module to convert parsed data from an Amira (R) header into a set of nested objects. The key class is <a class="reference internal" href="#ahds.header.AmiraHeader" title="ahds.header.AmiraHeader"><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code></a>.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ahds.header</span> <span class="k">import</span> <span class="n">AmiraHeader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ah</span> <span class="o">=</span> <span class="n">AmiraHeader</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s1">&#39;&lt;somfile&gt;.am&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">ah</span>
</pre></div>
</div>
<p>Each nested object is constructed from the :py:class:<code class="docutils literal notranslate"><span class="pre">Block</span></code> class defined.</p>
<p>There are fife top-level attributes that every <code class="docutils literal notranslate"><span class="pre">AmiraHeader</span></code> will have:</p>
<ul class="simple">
<li>designation</li>
<li>definitions</li>
<li>parameters</li>
<li>materials</li>
<li>data_pointers</li>
</ul>
<p>All of them, exempt materials and parameters are marked deprecated and may be removed in
future. The designation and defintions attributes just return the reference to the AmiraHeader
instance which host all the attributes and data array declarations (definitions) found within
the AmiraMesh and HyperSurface files. The data_pointers attribute collects from each
attribute representing a valid array declaration the defined data definitions and returns the resulting
list. New code should directly access the Block objects describing the available data directly
from the corresponding array attribute of the AmiraHeader object.</p>
<p>The blocks defining the available data structures extend the basic Block to the corresponding 
AmiraMeshDataStream and AmiraHxSurfaceDataStream blocks which allow to load and access the correspinding
data using the data property defined by theses blocks. The additional stream_data, encoded_data and
decoded_data attributes are deprecated and may be removed in future versions.</p>
<p>The attrs attribute of all Blocks and extended Block objects including AmiraHeader it self
which allows to query the attributes added during loading is deprecated and may be removed in future version.
To query which attributes are defined on each block use the builtin dir function instead. To 
access the defined attributes just use them liḱe any other static attribute.</p>
<p>The following attributes are moved from the designation attribute to the basic header block:</p>
<blockquote>
<div><ul class="simple">
<li>filetype e.g. <code class="docutils literal notranslate"><span class="pre">AmiraMesh</span></code> or <code class="docutils literal notranslate"><span class="pre">HyperSurface</span></code></li>
<li>dimensions e.g. <code class="docutils literal notranslate"><span class="pre">3D</span></code></li>
<li>format e.g. <code class="docutils literal notranslate"><span class="pre">BINARY-LITTLE-ENDIAN</span></code></li>
<li>version e.g. <code class="docutils literal notranslate"><span class="pre">2.1</span></code></li>
<li>extra_format (if present)</li>
</ul>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ah</span><span class="o">.</span><span class="n">Nodes</span><span class="p">)</span>
<span class="go">print(ah.Nodes)</span>
<span class="go"> +-Nodes: (&lt;ahds.ahds_common.Block object at 0x7f5dc1a74d08&gt;)</span>
<span class="go"> |  |  +-Coordinates: (&lt;ahds.data_stream.AmiraMeshDataStream object at 0x7f5dc1a97458&gt;)</span>
<span class="go"> |  |  |  +-block: 1</span>
<span class="go"> |  |  |  +-array: Nodes(&lt;ahds.ahds_common.Block object at 0x7f5dc1a74d08&gt;)</span>
<span class="go"> |  |  |  +-type: float</span>
<span class="go"> |  |  |  +-dimension: 3</span>
<span class="go"> |  +-dimension: 3154</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ah</span><span class="o">.</span><span class="n">Tetrahedra</span><span class="o">.</span><span class="n">Nodes</span><span class="p">)</span>
<span class="go"> +-Nodes: (&lt;ahds.data_stream.AmiraMeshDataStream object at 0x7ffa3da25180&gt;)</span>
<span class="go"> |  +-type: int</span>
<span class="go"> |  +-dimension: 4</span>
<span class="go"> |  +-array: Tetrahedra(&lt;ahds.ahds_common.Block object at 0x7ffa3da3a9c8&gt;)</span>
<span class="go"> |  |  |  +-Materials: (&lt;ahds.data_stream.AmiraMeshDataStream object at 0x7ffa3da25118&gt;)</span>
<span class="go"> |  |  |  |  +-type: byte</span>
<span class="go"> |  |  |  |  +-dimension: 1</span>
<span class="go"> |  |  |  |  +-array: Tetrahedra(&lt;ahds.ahds_common.Block object at 0x7ffa3da3a9c8&gt;)</span>
<span class="go"> |  |  |  |  +-block: 4</span>
<span class="go"> |  |  +-Nodes: (&lt;ahds.data_stream.AmiraMeshDataStream object at 0x7ffa3da25180&gt;)</span>
<span class="go"> |  |  +-dimension: 14488</span>
<span class="go"> |  +-block: 3</span>
</pre></div>
</div>
<p>The special array attribute indicates that the corresponding block is linked to a specific data array.
In the above examples to the Nodes structure defining the 3D coordenates of the corners of the Tetrahedra
and the Tetrahedra structure defining which nodes belong to which tetrahedron.
In the frist example only the block header is repeated to indicate the backreference in the second
example the full information is displayed for the parent array.</p>
<p>The dimensions attributes indicate the number of nodes on which the corresponding data is defined and the
dimension of the Coordinates block defines how many elements each entry has. By calling</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ah</span><span class="o">.</span><span class="n">Nodes</span><span class="o">.</span><span class="n">Coordinates</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(3154, 3)</span>
</pre></div>
</div>
<p>the corresponding data block is loaded and converted into a numpy array having the exact shape as
indicated by the two dimension attributes. The number of rows corresponds to the the dimension 
attribute of the Nodes Block and the number of columns is equal to the dimensions attribute.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ah</span><span class="o">.</span><span class="n">Nodes</span><span class="o">.</span><span class="n">Coordinates</span><span class="o">.</span><span class="n">data</span><span class="p">[:</span><span class="mi">5</span><span class="p">,:]</span>
<span class="go">array([[ 0.09844301, -0.007811  , -0.0869359 ],</span>
<span class="go">       [ 0.055759  ,  0.02217599,  0.093963  ],</span>
<span class="go">       [ 0.1167009 ,  0.03151399, -0.0842569 ],</span>
<span class="go">       [ 0.11912691,  0.03461899, -0.046145  ],</span>
<span class="go">       [ 0.11671901,  0.028787  , -0.0340129 ]], dtype=float32)</span>
</pre></div>
</div>
<p>The datatype of the array corresponds to the one indicated by the type attribute. The endianess of the
file is transparently handled during the loading of the data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">ah</span><span class="o">.</span><span class="n">data_pointers</span><span class="o">.</span><span class="n">data_pointer_1</span>
<span class="go">data_pointer_1</span>
<span class="go">pointer_name: VERTEX</span>
<span class="go">data_format: None</span>
<span class="go">data_dimension: 3</span>
<span class="go">data_type: float</span>
<span class="go">data_name: VertexCoordinates</span>
<span class="go">data_index: 1</span>
<span class="go">data_length: None</span>
</pre></div>
</div>
<p>Data pointers are identified by the name <code class="docutils literal notranslate"><span class="pre">data_pointer_&lt;n&gt;</span></code> where &lt;n&gt; is the number indicated by the
block attibute in the above examples.</p>
<p>The above approach can also be used to load Amira HyperSurface files.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ah</span> <span class="o">=</span> <span class="n">AmiraHeader</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s1">&#39;&lt;somfile&gt;.surf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The restulting structure and behavior is the same as for AmiraMesh files.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ah</span><span class="p">)</span>
<span class="go">AMIRA HEADER (&lt;somfile&gt;.surf)</span>
<span class="go"> +-path: &lt;somepath&gt;</span>
<span class="go"> +-data section at: 355</span>
<span class="go">--------------------------------------------------</span>
<span class="go"> +-parameters: (&lt;ahds_common.Block object at 0x7efd1cc9ed48&gt;)</span>
<span class="go"> |  |  +-Materials: (&lt;ahds_common.ListBlock object at 0x7efd1cfcc8b8&gt;)</span>
<span class="go"> |  |  |  +-Exterior2: []</span>
<span class="go"> |  |  |  +-Exterior: (&lt;ahds_common.Block object at 0x7efd1cfd5108&gt;)</span>
<span class="go"> |  |  |  |  +-Id: 1</span>
<span class="go"> |  |  |  +-RA: (&lt;ahds_common.Block object at 0x7efd1cfd5088&gt;)</span>
<span class="go"> |  |  |  |  +-Id: 2</span>
<span class="go"> |  |  |  |  +-Color: [0.94902, 0.847059, 0.0901961]</span>
<span class="go"> |  |  +-[0]=None</span>
<span class="go"> |  |  +-[1]=(Exterior&lt;ahds_common.Block object at 0x7efd1cfd5108&gt;)</span>
<span class="go"> |  |  +-[2]=(RA&lt;ahds_common.Block object at 0x7efd1cfd5088&gt;)</span>
<span class="go"> |  |  +-length: 3</span>
<span class="go"> |  +-BoundaryIds: &quot;BoundaryConditions&quot;(&lt;ahds_common.Block object at 0x7efd1cfd5608&gt;)</span>
<span class="go"> |  |  |  +-IdList: (&lt;ahds_common.ListBlock object at 0x7efd1cfcc870&gt;)</span>
<span class="go"> |  |  |  +-[0]=(Id0&lt;ahds_common.Block object at 0x7efd1cc9e048&gt;)</span>
<span class="go"> |  |  |  +-length: 1</span>
<span class="go"> |  |  |  +-Id0: (&lt;ahds_common.Block object at 0x7efd1cc9e048&gt;)</span>
<span class="go"> |  |  |  |  +-Id: 0</span>
<span class="go"> |  |  |  |  +-Info: &quot;undefined&quot;</span>
<span class="go">--------------------------------------------------</span>
<span class="go"> +-RBloodAtrium.surf: (&lt;__main__.AmiraHeader object at 0x7efd1cfb7b10&gt;)</span>
<span class="go"> |  +-extra_format: None</span>
<span class="go"> |  +-filetype: HyperSurface</span>
<span class="go"> |  +-version: 0.1</span>
<span class="go"> |  +-dimension: None</span>
<span class="go"> |  +-format: BINARY</span>
</pre></div>
</div>
<p>Any HyperSurface file implicitly defines the following basic elements.</p>
<blockquote>
<div><ul class="simple">
<li>Parameters</li>
<li>Vertices</li>
<li>Patch&lt;n&gt;</li>
<li>PatchList</li>
</ul>
</div></blockquote>
<p>As there can be more than one Patch within the a HyperSuface file, for each additional Patch a
Patch&lt;n&gt; block is insereted into the header on accessing the corresponding data. The
PatcheList attribute allows to access all defined patches in their order as they are defined within
the file. Additionally the following attributes may be present and added when accessing them.</p>
<blockquote>
<div><ul class="simple">
<li>Surface&lt;n&gt;</li>
<li>SurfaceList</li>
<li>BoundaryCurve&lt;n&gt;</li>
<li>BoundaryCurveList</li>
<li>NBranchingPoints</li>
<li>NVerticesOnCurves</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>The Vertices contains the follwoing datastream</dt>
<dd><ul class="first last simple">
<li>Coordinates</li>
</ul>
</dd>
<dt>The Patch&lt;n&gt; contains the follwoing datastreams and attributes</dt>
<dd><ul class="first last simple">
<li>InnerRegion</li>
<li>OuterRegion</li>
<li>BranchingPoints</li>
<li>Triangles</li>
</ul>
</dd>
<dt>The Surface&lt;n&gt; contains the following datastream and attributes</dt>
<dd><ul class="first last simple">
<li>Region</li>
<li>Patches</li>
</ul>
</dd>
<dt>The BoundaryCurve&lt;n&gt; defindes teh followng data stream</dt>
<dd><ul class="first last simple">
<li>Vertices</li>
</ul>
</dd>
</dl>
<p>The NBranchingPoints and NVerticesOnCurves are repesented by value attributes of
the AmiraHeader Block.</p>
<p>NOTE!!!
NEW DESCRIPTION OF THE FILE FORMAT:
<a class="reference external" href="https://assets.thermofisher.com/TFS-Assets/MSD/Product-Guides/user-guide-amira-software.pdf">https://assets.thermofisher.com/TFS-Assets/MSD/Product-Guides/user-guide-amira-software.pdf</a></p>
<dl class="class">
<dt id="ahds.header.AmiraHeader">
<em class="property">class </em><code class="descclassname">ahds.header.</code><code class="descname">AmiraHeader</code><span class="sig-paren">(</span><em>fn</em>, <em>load_streams=True</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/header.html#AmiraHeader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.header.AmiraHeader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.core.Block</span></code></p>
<p>Class to encapsulate Amira metadata and accessors to amria data streams</p>
<dl class="method">
<dt id="ahds.header.AmiraHeader.add_attr">
<code class="descname">add_attr</code><span class="sig-paren">(</span><em>attr</em>, <em>value=None</em>, <em>isparent=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ahds.header.AmiraHeader.add_attr" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an attribute to this block object</p>
</dd></dl>

<dl class="method">
<dt id="ahds.header.AmiraHeader.data_pointers">
<code class="descname">data_pointers</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/header.html#AmiraHeader.data_pointers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.header.AmiraHeader.data_pointers" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of data pointers together with a name, data type, dimension, 
index, format and length</p>
<p>NOTE: deprecated access the data defnitions for each data array through the corresponding attributes
eg.: ah.Nodes.Coordinates instead of ah.data_pointers.data_pointer_1 ah.Tetrahedra.Nodes instead of 
ah.data_pointers.data_pointer_2 etc.</p>
</dd></dl>

<dl class="method">
<dt id="ahds.header.AmiraHeader.definitions">
<code class="descname">definitions</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/header.html#AmiraHeader.definitions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.header.AmiraHeader.definitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Definitions consist of a key-value pair specified just after the 
designation preceded by the key-word ‘define’</p>
<p>NOTE: this property is deprecated access the corresponding attributes directly
eg. ah.Nodes instead of ah.definitions.Nodes or ah.Tetrahedra instead of ah.defintions.Tetrahedra</p>
</dd></dl>

<dl class="method">
<dt id="ahds.header.AmiraHeader.designation">
<code class="descname">designation</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/header.html#AmiraHeader.designation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.header.AmiraHeader.designation" title="Permalink to this definition">¶</a></dt>
<dd><p>Designation of the Amira file defined in the first row</p>
<p>Designations consist of some or all of the following data:</p>
<ul class="simple">
<li>filetype e.g. <code class="docutils literal notranslate"><span class="pre">AmiraMesh</span></code> or <code class="docutils literal notranslate"><span class="pre">HyperSurface</span></code></li>
<li>dimensions e.g. <code class="docutils literal notranslate"><span class="pre">3D</span></code></li>
<li>format e.g. <code class="docutils literal notranslate"><span class="pre">BINARY-LITTLE-ENDIAN</span></code></li>
<li>version e.g. <code class="docutils literal notranslate"><span class="pre">2.1</span></code></li>
<li>extra format e.g. <code class="docutils literal notranslate"><span class="pre">&lt;hxsurface&gt;</span></code></li>
</ul>
<p>NOTE: this property is deprecated use the corresponding attributes of the AmiraHeader
instead to access the above informations</p>
</dd></dl>

<dl class="classmethod">
<dt id="ahds.header.AmiraHeader.from_file">
<em class="property">classmethod </em><code class="descname">from_file</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/header.html#AmiraHeader.from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.header.AmiraHeader.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Deprecated classmethod</p>
</dd></dl>

<dl class="method">
<dt id="ahds.header.AmiraHeader.load">
<code class="descname">load</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/header.html#AmiraHeader.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.header.AmiraHeader.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Public loading method</p>
</dd></dl>

<dl class="method">
<dt id="ahds.header.AmiraHeader.move_attr">
<code class="descname">move_attr</code><span class="sig-paren">(</span><em>new_name</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#ahds.header.AmiraHeader.move_attr" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename an attribute</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ahds.data_stream">
<span id="ahds-data-stream-module"></span><h2><code class="docutils literal notranslate"><span class="pre">ahds.data_stream</span></code> module<a class="headerlink" href="#module-ahds.data_stream" title="Permalink to this headline">¶</a></h2>
<p>Data stream module</p>
<p>Here we define the set of classes that define and manage data streams</p>
<dl class="class">
<dt id="ahds.data_stream.AmiraHxSurfaceDataStream">
<em class="property">class </em><code class="descclassname">ahds.data_stream.</code><code class="descname">AmiraHxSurfaceDataStream</code><span class="sig-paren">(</span><em>name</em>, <em>header</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/data_stream.html#AmiraHxSurfaceDataStream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.data_stream.AmiraHxSurfaceDataStream" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream</span></code></p>
<p>Class that defines an Amira HxSurface data stream</p>
<dl class="method">
<dt id="ahds.data_stream.AmiraHxSurfaceDataStream.add_attr">
<code class="descname">add_attr</code><span class="sig-paren">(</span><em>attr</em>, <em>value=None</em>, <em>isparent=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ahds.data_stream.AmiraHxSurfaceDataStream.add_attr" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an attribute to this block object</p>
</dd></dl>

<dl class="method">
<dt id="ahds.data_stream.AmiraHxSurfaceDataStream.get_data">
<code class="descname">get_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ahds.data_stream.AmiraHxSurfaceDataStream.get_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Decode and return the stream data in this stream</p>
</dd></dl>

<dl class="attribute">
<dt id="ahds.data_stream.AmiraHxSurfaceDataStream.is_parent">
<code class="descname">is_parent</code><a class="headerlink" href="#ahds.data_stream.AmiraHxSurfaceDataStream.is_parent" title="Permalink to this definition">¶</a></dt>
<dd><p>A ListBlock is a parent if it has a Block attribute or if it has list items</p>
</dd></dl>

<dl class="attribute">
<dt id="ahds.data_stream.AmiraHxSurfaceDataStream.load_stream">
<code class="descname">load_stream</code><a class="headerlink" href="#ahds.data_stream.AmiraHxSurfaceDataStream.load_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Reports whether data streams are loaded or not</p>
</dd></dl>

<dl class="attribute">
<dt id="ahds.data_stream.AmiraHxSurfaceDataStream.material_dict">
<code class="descname">material_dict</code><a class="headerlink" href="#ahds.data_stream.AmiraHxSurfaceDataStream.material_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience dictionary of materials indexed by material name</p>
<p>If this is not a Materials ListBlock (name = ‘Material’) then it should return None</p>
</dd></dl>

<dl class="method">
<dt id="ahds.data_stream.AmiraHxSurfaceDataStream.move_attr">
<code class="descname">move_attr</code><span class="sig-paren">(</span><em>new_name</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#ahds.data_stream.AmiraHxSurfaceDataStream.move_attr" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename an attribute</p>
</dd></dl>

<dl class="method">
<dt id="ahds.data_stream.AmiraHxSurfaceDataStream.read">
<code class="descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/data_stream.html#AmiraHxSurfaceDataStream.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.data_stream.AmiraHxSurfaceDataStream.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the data streams from the HxSurface file</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ahds.data_stream.AmiraMeshDataStream">
<em class="property">class </em><code class="descclassname">ahds.data_stream.</code><code class="descname">AmiraMeshDataStream</code><span class="sig-paren">(</span><em>name</em>, <em>header</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/data_stream.html#AmiraMeshDataStream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.data_stream.AmiraMeshDataStream" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream</span></code></p>
<p>Class that defines an AmiraMesh data stream</p>
<dl class="method">
<dt id="ahds.data_stream.AmiraMeshDataStream.add_attr">
<code class="descname">add_attr</code><span class="sig-paren">(</span><em>attr</em>, <em>value=None</em>, <em>isparent=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ahds.data_stream.AmiraMeshDataStream.add_attr" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an attribute to this block object</p>
</dd></dl>

<dl class="method">
<dt id="ahds.data_stream.AmiraMeshDataStream.get_data">
<code class="descname">get_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ahds.data_stream.AmiraMeshDataStream.get_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Decode and return the stream data in this stream</p>
</dd></dl>

<dl class="attribute">
<dt id="ahds.data_stream.AmiraMeshDataStream.is_parent">
<code class="descname">is_parent</code><a class="headerlink" href="#ahds.data_stream.AmiraMeshDataStream.is_parent" title="Permalink to this definition">¶</a></dt>
<dd><p>A ListBlock is a parent if it has a Block attribute or if it has list items</p>
</dd></dl>

<dl class="attribute">
<dt id="ahds.data_stream.AmiraMeshDataStream.load_stream">
<code class="descname">load_stream</code><a class="headerlink" href="#ahds.data_stream.AmiraMeshDataStream.load_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Reports whether data streams are loaded or not</p>
</dd></dl>

<dl class="attribute">
<dt id="ahds.data_stream.AmiraMeshDataStream.material_dict">
<code class="descname">material_dict</code><a class="headerlink" href="#ahds.data_stream.AmiraMeshDataStream.material_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience dictionary of materials indexed by material name</p>
<p>If this is not a Materials ListBlock (name = ‘Material’) then it should return None</p>
</dd></dl>

<dl class="method">
<dt id="ahds.data_stream.AmiraMeshDataStream.move_attr">
<code class="descname">move_attr</code><span class="sig-paren">(</span><em>new_name</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#ahds.data_stream.AmiraMeshDataStream.move_attr" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename an attribute</p>
</dd></dl>

<dl class="method">
<dt id="ahds.data_stream.AmiraMeshDataStream.read">
<code class="descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/data_stream.html#AmiraMeshDataStream.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.data_stream.AmiraMeshDataStream.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the data streams from the AmiraMesh file</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ahds.data_stream.hxzip_decode">
<code class="descclassname">ahds.data_stream.</code><code class="descname">hxzip_decode</code><span class="sig-paren">(</span><em>data</em>, <em>output_size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/data_stream.html#hxzip_decode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.data_stream.hxzip_decode" title="Permalink to this definition">¶</a></dt>
<dd><p>Decode HxZip data stream</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – a raw stream of data to be unpacked</li>
<li><strong>output_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – the number of items when <code class="docutils literal notranslate"><span class="pre">data</span></code> is uncompressed</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return np.array output:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first last">an array of <code class="docutils literal notranslate"><span class="pre">np.uint8</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ahds.data_stream.set_data_stream">
<code class="descclassname">ahds.data_stream.</code><code class="descname">set_data_stream</code><span class="sig-paren">(</span><em>name</em>, <em>header</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ahds/data_stream.html#set_data_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ahds.data_stream.set_data_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory function used by AmiraHeader to determine the type of data stream present</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="overview.html" class="btn btn-neutral float-left" title="ahds" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, EMBL-EBI

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>