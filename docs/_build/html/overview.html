

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>ahds &mdash; ahds 0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ahds package" href="ahds.html" />
    <link rel="prev" title="ahds package" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ahds
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">ahds</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#license">License</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#use-cases">Use Cases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#future-plans">Future Plans</a></li>
<li class="toctree-l2"><a class="reference internal" href="#background-and-definitions">Background and Definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#headers-in-detail">Headers in Detail</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-streams-in-detail">Data Streams in Detail</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ahds-modules"><code class="docutils literal notranslate"><span class="pre">ahds</span></code> Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ahds-grammar"><code class="docutils literal notranslate"><span class="pre">ahds.grammar</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#ahds-header"><code class="docutils literal notranslate"><span class="pre">ahds.header</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#ahds-core"><code class="docutils literal notranslate"><span class="pre">ahds.core</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#ahds-data-stream"><code class="docutils literal notranslate"><span class="pre">ahds.data_stream</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">Classes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ahds.html"><code class="docutils literal notranslate"><span class="pre">ahds</span></code> package</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ahds</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><code class="docutils literal notranslate"><span class="pre">ahds</span></code></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/overview.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ahds">
<h1><a class="toc-backref" href="#id4"><code class="docutils literal notranslate"><span class="pre">ahds</span></code></a><a class="headerlink" href="#ahds" title="Permalink to this headline">¶</a></h1>
<a class="reference external image-reference" href="https://ahds.readthedocs.io/en/latest/?badge=latest"><img alt="Documentation Status" src="https://readthedocs.org/projects/ahds/badge/?version=latest" /></a>
<div class="contents topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#ahds" id="id4"><code class="docutils literal notranslate"><span class="pre">ahds</span></code></a><ul>
<li><a class="reference internal" href="#overview" id="id5">Overview</a></li>
<li><a class="reference internal" href="#license" id="id6">License</a><ul>
<li><a class="reference internal" href="#use-cases" id="id7">Use Cases</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installation" id="id8">Installation</a></li>
<li><a class="reference internal" href="#getting-started" id="id9">Getting Started</a></li>
<li><a class="reference internal" href="#future-plans" id="id10">Future Plans</a></li>
<li><a class="reference internal" href="#background-and-definitions" id="id11">Background and Definitions</a><ul>
<li><a class="reference internal" href="#headers-in-detail" id="id12">Headers in Detail</a></li>
<li><a class="reference internal" href="#data-streams-in-detail" id="id13">Data Streams in Detail</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ahds-modules" id="id14"><code class="docutils literal notranslate"><span class="pre">ahds</span></code> Modules</a><ul>
<li><a class="reference internal" href="#ahds-grammar" id="id15"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.grammar</span></code></a></li>
<li><a class="reference internal" href="#ahds-header" id="id16"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.header</span></code></a></li>
<li><a class="reference internal" href="#ahds-core" id="id17"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.core</span></code></a></li>
<li><a class="reference internal" href="#ahds-data-stream" id="id18"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.data_stream</span></code></a><ul>
<li><a class="reference internal" href="#classes" id="id19">Classes</a></li>
<li><a class="reference internal" href="#functions" id="id20">Functions</a></li>
<li><a class="reference internal" href="#id3" id="id21">Classes</a><ul>
<li><a class="reference internal" href="#classes-describing-amira-r-data-streams" id="id22">Classes describing Amira (R) data streams</a></li>
<li><a class="reference internal" href="#amiramesh-contenttype-classes" id="id23">AmiraMesh ContentType classes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id5">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ahds</span></code> is a Python package to parse and handle Amira (R) files.
It was developed to facilitate reading of Amira (R) files as part of the <a class="reference external" href="https://sfftk.readthedocs.io">EMDB-SFF toolkit</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Amira (R) is a trademark of Thermo Fisher Scientific. This package is in no way affiliated with with Thermo Fisher Scientific.</p>
</div>
</div>
<div class="section" id="license">
<h2><a class="toc-backref" href="#id6">License</a><a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ahds</span></code> is free software and is provided under the terms of the Apache License, Version 2.0.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Copyright</span> <span class="mi">2017</span> <span class="n">EMBL</span> <span class="o">-</span> <span class="n">European</span> <span class="n">Bioinformatics</span> <span class="n">Institute</span>

<span class="n">Licensed</span> <span class="n">under</span> <span class="n">the</span> <span class="n">Apache</span> <span class="n">License</span><span class="p">,</span> <span class="n">Version</span> <span class="mf">2.0</span> <span class="p">(</span><span class="n">the</span> <span class="s2">&quot;License&quot;</span><span class="p">);</span>
<span class="n">you</span> <span class="n">may</span> <span class="ow">not</span> <span class="n">use</span> <span class="n">this</span> <span class="n">file</span> <span class="k">except</span> <span class="ow">in</span> <span class="n">compliance</span> <span class="k">with</span> <span class="n">the</span> <span class="n">License</span><span class="o">.</span>
<span class="n">You</span> <span class="n">may</span> <span class="n">obtain</span> <span class="n">a</span> <span class="n">copy</span> <span class="n">of</span> <span class="n">the</span> <span class="n">License</span> <span class="n">at</span>

<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">licenses</span><span class="o">/</span><span class="n">LICENSE</span><span class="o">-</span><span class="mf">2.0</span>

<span class="n">Unless</span> <span class="n">required</span> <span class="n">by</span> <span class="n">applicable</span> <span class="n">law</span> <span class="ow">or</span> <span class="n">agreed</span> <span class="n">to</span> <span class="ow">in</span> <span class="n">writing</span><span class="p">,</span>
<span class="n">software</span> <span class="n">distributed</span> <span class="n">under</span> <span class="n">the</span> <span class="n">License</span> <span class="ow">is</span> <span class="n">distributed</span> <span class="n">on</span> <span class="n">an</span>
<span class="s2">&quot;AS IS&quot;</span> <span class="n">BASIS</span><span class="p">,</span> <span class="n">WITHOUT</span> <span class="n">WARRANTIES</span> <span class="n">OR</span> <span class="n">CONDITIONS</span> <span class="n">OF</span> <span class="n">ANY</span> <span class="n">KIND</span><span class="p">,</span>
<span class="n">either</span> <span class="n">express</span> <span class="ow">or</span> <span class="n">implied</span><span class="o">.</span> <span class="n">See</span> <span class="n">the</span> <span class="n">License</span> <span class="k">for</span> <span class="n">the</span> <span class="n">specific</span>
<span class="n">language</span> <span class="n">governing</span> <span class="n">permissions</span> <span class="ow">and</span> <span class="n">limitations</span> <span class="n">under</span> <span class="n">the</span> <span class="n">License</span><span class="o">.</span>
</pre></div>
</div>
<div class="section" id="use-cases">
<h3><a class="toc-backref" href="#id7">Use Cases</a><a class="headerlink" href="#use-cases" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Detect and parse Amira (R) headers and return structured data</li>
<li>Decode data (<code class="docutils literal notranslate"><span class="pre">HxRLEByte</span></code>, <code class="docutils literal notranslate"><span class="pre">HxZip</span></code>)</li>
<li>Easy extensibility to handle previously unencountered data streams</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">ahds</span></code> was written and is maintained by Paul K. Korir but there is
<a class="reference external" href="https://github.com/emdb-empiar/ahds/blob/dev/CONTRIBUTORS.txt">a list of contributors</a>.
Feel free to join this initiative.</p>
</div>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#id8">Installation</a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ahds</span></code> works with Python 2.7, 3.5, 3.6, 3.7 and 3.8. It requires <code class="docutils literal notranslate"><span class="pre">numpy</span></code> to build.</p>
<blockquote>
<div>pip install ahds</div></blockquote>
</div>
<div class="section" id="getting-started">
<h2><a class="toc-backref" href="#id9">Getting Started</a><a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>You can begin playing with <code class="docutils literal notranslate"><span class="pre">ahds</span></code> out of the box using the provided console command <code class="docutils literal notranslate"><span class="pre">ahds</span></code>.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span>me@home ~$ ahds ahds/data/FieldOnTetraMesh.am
********************************************************************************************************************************************
AMIRA (R) HEADER AND DATA STREAMS
--------------------------------------------------------------------------------------------------------------------------------------------
+-header                                                                                         AmiraFile [is_parent? False]
|  +-dimension: 3D
|  +-format: BINARY
|  +-endian: BIG
|  +-version: 2.0
|  +-content_type: None
|  +-Parameters                                                                                      Block [is_parent? False]
|  |  +&lt;Parent&gt;: header
|  +-Tetrahedra                                                                                      Block [is_parent? False]
|  |  +&lt;Parent&gt;: header
|  |  +-length: 23685
|  |  +-Data                                                                           AmiraMeshDataStream [is_parent? False]
|  |  |  +&lt;Parent&gt;: Tetrahedra
|  |  |  +-data_index: 1
|  |  |  +-dimension: 3
|  |  |  +-type: float
|  |  |  +-shape: 23685
|  |  |  +-format: None
|  |  |  +-interpolation_method: Constant
|  |  |  +-field_name: f
********************************************************************************************************************************************
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ahds</span></code> command takes the following arguments</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span>me@home ~$ ahds -h
usage: ahds [-h] [-s] [-d] [-l] file [file ...]

Python tool to read and display Amira files

positional arguments:
  file                a valid Amira file with an optional block path

optional arguments:
  -h, --help          show this help message and exit
  -s, --load-streams  whether to load data streams or not [default: False]
  -d, --debug         display debugging information [default: False]
  -l, --literal       display the literal header [default: False]
</pre></div>
</div>
<p>You can specify a <strong>dotted path</strong> after the filename to only render that the content of that field in the header:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span>me@home ~$ ahds ahds/data/FieldOnTetraMesh.am header.Tetraheder
***********************************************************************************************************************************
ahds: Displaying path &#39;header.Tetrahedra&#39;
-----------------------------------------------------------------------------------------------------------------------------------
+-Tetrahedra                                                                                         Block [is_parent? False]
|  +&lt;Parent&gt;: header
|  +-length: 23685
|  +-Data                                                                              AmiraMeshDataStream [is_parent? False]
|  |  +&lt;Parent&gt;: Tetrahedra
|  |  +-data_index: 1
|  |  +-dimension: 3
|  |  +-type: float
|  |  +-shape: 23685
|  |  +-format: None
|  |  +-interpolation_method: Constant
|  |  +-field_name: f
</pre></div>
</div>
<p>For debugging you can display the literal header (the exact header present in the file) using the <code class="docutils literal notranslate"><span class="pre">-l/--literal</span></code> flag.
Also, you can display the parsed data structure using the <code class="docutils literal notranslate"><span class="pre">-d/--debug</span></code> flag.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span>me@home ~$ ahds --literal --debug ahds/data/FieldOnTetraMesh.am
***********************************************************************************************************************************
ahds: Displaying literal header
-----------------------------------------------------------------------------------------------------------------------------------
# AmiraMesh 3D BINARY 2.0
# CreationDate: Tue Nov  2 11:46:31 2004


nTetrahedra 23685

TetrahedronData { float[3] Data } @1
Field { float[3] f } Constant(@1)

# Data section follows
***********************************************************************************************************************************
ahds: Displaying parsed header data
-----------------------------------------------------------------------------------------------------------------------------------
[{&#39;designation&#39;: {&#39;dimension&#39;: &#39;3D&#39;,
                  &#39;filetype&#39;: &#39;AmiraMesh&#39;,
                  &#39;format&#39;: &#39;BINARY&#39;,
                  &#39;version&#39;: &#39;2.0&#39;}},
 {&#39;comment&#39;: {&#39;date&#39;: &#39;Tue Nov  2 11:46:31 2004&#39;}},
 {&#39;array_declarations&#39;: [{&#39;array_dimension&#39;: 23685,
                          &#39;array_links&#39;: {},
                          &#39;array_name&#39;: &#39;Tetrahedra&#39;}]},
 {&#39;data_definitions&#39;: [{&#39;array_reference&#39;: &#39;Tetrahedra&#39;,
                        &#39;data_dimension&#39;: 3,
                        &#39;data_index&#39;: 1,
                        &#39;data_name&#39;: &#39;Data&#39;,
                        &#39;data_type&#39;: &#39;float&#39;},
                       {&#39;array_reference&#39;: &#39;Field&#39;,
                        &#39;data_dimension&#39;: 3,
                        &#39;data_index&#39;: 1,
                        &#39;data_name&#39;: &#39;f&#39;,
                        &#39;data_type&#39;: &#39;float&#39;,
                        &#39;interpolation_method&#39;: &#39;Constant&#39;}]}]

***********************************************************************************************************************************
AMIRA (R) HEADER AND DATA STREAMS
-----------------------------------------------------------------------------------------------------------------------------------
+-header                                                                                         AmiraFile [is_parent? False]
|  +-dimension: 3D
|  +-format: BINARY
|  +-endian: BIG
|  +-version: 2.0
|  +-content_type: None
|  +-Parameters                                                                                      Block [is_parent? False]
|  |  +&lt;Parent&gt;: header
|  +-Tetrahedra                                                                                      Block [is_parent? False]
|  |  +&lt;Parent&gt;: header
|  |  +-length: 23685
|  |  +-Data                                                                           AmiraMeshDataStream [is_parent? False]
|  |  |  +&lt;Parent&gt;: Tetrahedra
|  |  |  +-data_index: 1
|  |  |  +-dimension: 3
|  |  |  +-type: float
|  |  |  +-shape: 23685
|  |  |  +-format: None
|  |  |  +-interpolation_method: Constant
|  |  |  +-field_name: f
***********************************************************************************************************************************
</pre></div>
</div>
<p>By default, data streams are not read — only the header is parsed. You may obtain the data streams using the
<code class="docutils literal notranslate"><span class="pre">-s/--load-streams</span></code> flag.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span>me@home ~$ ahds --load-streams ahds/data/FieldOnTetraMesh.am
********************************************************************************************************************************************
AMIRA (R) HEADER AND DATA STREAMS
--------------------------------------------------------------------------------------------------------------------------------------------
+-header                                                                                         AmiraFile [is_parent? False]
|  +-dimension: 3D
|  +-format: BINARY
|  +-endian: BIG
|  +-version: 2.0
|  +-content_type: None
|  +-Parameters                                                                                      Block [is_parent? False]
|  |  +&lt;Parent&gt;: header
|  +-Tetrahedra                                                                                      Block [is_parent? False]
|  |  +&lt;Parent&gt;: header
|  |  +-length: 23685
|  |  +-Data                                                                           AmiraMeshDataStream [is_parent? False]
|  |  |  +&lt;Parent&gt;: Tetrahedra
|  |  |  +-data_index: 1
|  |  |  +-dimension: 3
|  |  |  +-type: float
|  |  |  +-shape: 23685
|  |  |  +-format: None
|  |  |  +-interpolation_method: Constant
|  |  |  +-field_name: f
|  |  |  +-data:
|  |  |  |   [[ 8.9173079e-01  9.7118092e-01  3.0000000e+02]
|  |  |  |    [-1.4623085e-01  7.1288460e-01  3.0000000e+02]
|  |  |  |    [ 6.3208640e-01 -3.5754296e-01  3.0000000e+02]
|  |  |  |    ...
|  |  |  |    [-7.2582179e-01  5.2918231e-01  3.0000000e+02]
|  |  |  |    [ 1.2271983e-01  4.3120453e-01  3.0000000e+02]
|  |  |  |    [ 1.4390504e+00  1.1243758e+00  3.0000000e+02]]
********************************************************************************************************************************************
</pre></div>
</div>
</div>
<div class="section" id="future-plans">
<h2><a class="toc-backref" href="#id10">Future Plans</a><a class="headerlink" href="#future-plans" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Write out valid Amira (R) files</li>
</ul>
</div>
<div class="section" id="background-and-definitions">
<h2><a class="toc-backref" href="#id11">Background and Definitions</a><a class="headerlink" href="#background-and-definitions" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ahds</span></code> presently handles two types of Amira (R) files:</p>
<ul class="simple">
<li><cite>AmiraMesh</cite> files, which typically but not necessarily have a <code class="docutils literal notranslate"><span class="pre">.am</span></code>, <code class="docutils literal notranslate"><span class="pre">.elm</span></code>, <code class="docutils literal notranslate"><span class="pre">.lmb</span></code> extension, and</li>
<li><cite>HyperSurface</cite> files, which have <code class="docutils literal notranslate"><span class="pre">.surf</span></code> and represent an older filetype.</li>
</ul>
<p>Both file types consist of two parts:</p>
<ul class="simple">
<li>a <cite>header</cite>, and</li>
<li>one or more <cite>data streams</cite>.</li>
</ul>
<p>Headers are structured in a modified VRML-like syntax and differ between AmiraMesh and HyperSurface files in some of
the keywords used.</p>
<p>A data stream is a sequence of encoded bytes either referred to in the header by some delimiter
(usually <code class="docutils literal notranslate"><span class="pre">&#64;&lt;data_stream_index&gt;</span></code>, where <code class="docutils literal notranslate"><span class="pre">&lt;data_stream_index&gt;</span></code> is an integer) or a set of structural keywords
(e.g. <code class="docutils literal notranslate"><span class="pre">Vertices</span></code>, <code class="docutils literal notranslate"><span class="pre">Patches</span></code>) expected in a predefined sequence.</p>
<div class="section" id="headers-in-detail">
<h3><a class="toc-backref" href="#id12">Headers in Detail</a><a class="headerlink" href="#headers-in-detail" title="Permalink to this headline">¶</a></h3>
<p>AmiraMesh and HyperSurface headers can be divided into four main sections:</p>
<ul class="simple">
<li><strong>designation</strong></li>
<li><strong>declarations</strong></li>
<li><strong>parameters</strong>, and</li>
<li><strong>definitions</strong>.</li>
</ul>
<p>The <cite>designation</cite> is the first line and conveys several important details about the format and structure of the file such as:</p>
<ul>
<li><p class="first">filetype (either <code class="docutils literal notranslate"><span class="pre">AmiraMesh</span></code> or <code class="docutils literal notranslate"><span class="pre">HyperSurface</span></code>)</p>
</li>
<li><p class="first">dimensionality (<code class="docutils literal notranslate"><span class="pre">3D</span></code>)</p>
</li>
<li><p class="first">format (<code class="docutils literal notranslate"><span class="pre">BINARY-LITTLE-ENDIAN</span></code>, <code class="docutils literal notranslate"><span class="pre">BINARY</span></code> or <code class="docutils literal notranslate"><span class="pre">ASCII</span></code>)</p>
</li>
<li><p class="first">version (a decimal number e.g. <code class="docutils literal notranslate"><span class="pre">2.1</span></code></p>
</li>
<li><p class="first">extra format data e.g. <code class="docutils literal notranslate"><span class="pre">&lt;hxsurface&gt;</span></code> specifying that an AmiraMesh file will contain HyperSurface data</p>
<blockquote>
<div><p>A series of <cite>declarations</cite> defines the sturcture and layout of the data and how many elements the corresponding array, vector or matrix contains. A declaration lline starts with the word â€˜defineâ€™ or in files created by early Amira versions have â€˜nâ€™ prepended. For example:</p>
</div></blockquote>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">define</span> <span class="n">Lattice</span> <span class="mi">862</span> <span class="mi">971</span> <span class="mi">200</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nVertices</span> <span class="mi">85120</span>
</pre></div>
</div>
<p>This is followed by grouped <cite>parameters</cite> enclosed in a series of braces beginning with the word â€˜Parametersâ€™. Various parameters are then enclosed each beginning with the name of that group of parameters e.g. â€˜Materialsâ€™</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Parameters {
    # grouped parameters
    Material {
        # the names of various materials with attributes
        Exterior {
            id 0
        }
        Inside {
            id 1,
            Color 0 1 1,
            Transparency 0.5
        }
    }
    Patches {
    # patch attributes
        InnerRegion â€œInsideâ€,
        OuterRegion â€œExteriorâ€,
        BoundaryID 0,
        BranchingPoints 0
    }
    # inline parameters
    GridSize &lt;value&gt;,
    â€¦
}
</pre></div>
</div>
<p>The most important set of parameters are materials as these specify colours and identities of distinct segments/datasets within the file.</p>
<p>Finally, AmiraMesh files list a set of <cite>definitions</cite> which detail the type,number of values and name for the item of the indicated data array, vector or matrix declared in the <cite>declarations</cite> section. Each datastream is identified by its unique <code class="docutils literal notranslate"><span class="pre">&#64;&lt;number&gt;</span></code> label. We refer to these as data streams because they consist of continuous streams of raw byte data that need to be decoded. Here is an example of <cite>definitions</cite> that define 3D surface primitives encoded by the corresponding datastreams.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Vertices</span> <span class="p">{</span> <span class="nb">float</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="n">Vertices</span> <span class="p">}</span> <span class="nd">@1</span>
<span class="n">TriangleData</span> <span class="p">{</span> <span class="nb">int</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="n">Triangles</span> <span class="p">}</span> <span class="nd">@2</span>
<span class="n">Patches</span><span class="o">-</span><span class="mi">0</span> <span class="p">{</span> <span class="nb">int</span> <span class="n">Patches</span><span class="o">-</span><span class="mi">0</span> <span class="p">}</span> <span class="nd">@3</span>
</pre></div>
</div>
<p>These refer to three raw data streams each found beginning with the delimiter <code class="docutils literal notranslate"><span class="pre">&#64;&lt;number&gt;</span></code>. Data stream one (<code class="docutils literal notranslate"><span class="pre">&#64;1</span></code>) is called <code class="docutils literal notranslate"><span class="pre">Vertices</span></code> and consists of float triples, two is called <code class="docutils literal notranslate"><span class="pre">TriangleData</span></code> and has integer 7-tuples and three called <code class="docutils literal notranslate"><span class="pre">Patches-</span></code> is a single integer (the number of patches). In some cases the data stream label  includes the data encoding for the corresponding data pointer.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Lattice</span> <span class="p">{</span> <span class="n">byte</span> <span class="n">Labels</span> <span class="p">}</span> <span class="nd">@1</span><span class="p">(</span><span class="n">HxByteRLE</span><span class="p">,</span><span class="mi">234575740</span><span class="p">)</span>
</pre></div>
</div>
<p>which is a run-length encoded data stream of the specified length, while</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Lattice</span> <span class="p">{</span> <span class="n">byte</span> <span class="n">Data</span> <span class="p">}</span> <span class="nd">@1</span><span class="p">(</span><span class="n">HxZip</span><span class="p">,</span><span class="mi">919215</span><span class="p">)</span>
</pre></div>
</div>
<p>contains zipped data of the specified length.</p>
<p>In case a datastream represents a field defined on geometric primitives like vertices, triangles, tetrahedra this indicated by a field defintion. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Field</span> <span class="p">{</span> <span class="nb">float</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="n">f1</span> <span class="p">}</span> <span class="n">Constant</span><span class="p">(</span><span class="nd">@1</span><span class="p">)</span>
</pre></div>
</div>
<p>The field defintion starts with the keyword <code class="docutils literal notranslate"><span class="pre">Field</span></code> repeates the type, number of values and specifies the name of the field. Further this linke inclueds the type of interpolation to be used for example when displaying the field along with the underlying primitive.</p>
</div>
<div class="section" id="data-streams-in-detail">
<h3><a class="toc-backref" href="#id13">Data Streams in Detail</a><a class="headerlink" href="#data-streams-in-detail" title="Permalink to this headline">¶</a></h3>
<p>AmiraMesh data streams are very simple. They always have a start delimiter made of <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> with an index that identifies the data stream. A newline character separates the delimiter with the data stream proper which is either plain ASCII or a binary stream (raw, zipped or encoded).</p>
<p>HyperSurface data streams structured to have the following sections:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Header</span>
<span class="n">Vertices</span> <span class="o">&lt;</span><span class="n">nvertices</span><span class="o">&gt;</span>
<span class="c1"># vertices data stream</span>

<span class="n">NBranchingPoints</span> <span class="o">&lt;</span><span class="n">nbranching_points</span><span class="o">&gt;</span>
<span class="n">NVerticesOnCurves</span> <span class="o">&lt;</span><span class="n">nvertices_on_curves</span><span class="o">&gt;</span>
<span class="c1"># optional Boundary curves section</span>
<span class="n">BoundaryCurves</span> <span class="o">&lt;</span><span class="n">nboundary_curves</span><span class="o">&gt;</span>
<span class="p">{</span>
    <span class="n">Vertices</span> <span class="o">&lt;</span><span class="n">num_vertices</span><span class="o">&gt;</span>
    <span class="c1"># bounday curve data stream ( vertex indices )</span>
<span class="p">}</span> <span class="c1"># repeats for as &lt;noundary_curves&gt; times</span>

<span class="n">Patches</span> <span class="o">&lt;</span><span class="n">npatches</span><span class="o">&gt;</span>
<span class="p">{</span> <span class="c1"># section for patch 1</span>
<span class="n">InnerRegion</span> <span class="o">&lt;</span><span class="n">inner_region_name</span><span class="o">&gt;</span>
<span class="n">OuterRegion</span> <span class="o">&lt;</span><span class="n">outer_region_name</span><span class="o">&gt;</span>
<span class="n">BoundaryID</span> <span class="o">&lt;</span><span class="n">boundary_id</span><span class="o">&gt;</span>
<span class="n">BranchingPoints</span> <span class="o">&lt;</span><span class="n">nbranching_points</span><span class="o">&gt;</span>
<span class="n">Triangles</span> <span class="o">&lt;</span><span class="n">ntriangles</span><span class="o">&gt;</span>
<span class="c1"># triangles data stream</span>
<span class="p">}</span> <span class="c1"># repeats for as &lt;npatches&gt; times</span>

<span class="c1"># optional surfaces section</span>
<span class="n">Surfaces</span> <span class="o">&lt;</span><span class="n">nsurfaces</span><span class="o">&gt;</span>
<span class="p">{</span>
    <span class="n">Region</span> <span class="o">&lt;</span><span class="n">material</span> <span class="n">name</span><span class="o">&gt;</span>
    <span class="n">Patches</span> <span class="o">&lt;</span><span class="n">num_patches</span><span class="o">&gt;</span>
    <span class="c1"># surface data stream (patch indices)</span>
<span class="p">}</span> <span class="c1"># repeats for as &lt;nsurfaces&gt; times</span>
</pre></div>
</div>
<p>HyperSurface data streams can be either plain ASCII or binary.</p>
</div>
</div>
<div class="section" id="ahds-modules">
<h2><a class="toc-backref" href="#id14"><code class="docutils literal notranslate"><span class="pre">ahds</span></code> Modules</a><a class="headerlink" href="#ahds-modules" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ahds</span></code> has four main modules:</p>
<ul class="simple">
<li><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.core</span></code></li>
<li><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.grammar</span></code> specifies an EBNF grammar</li>
<li><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.header</span></code></li>
<li><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.data_stream</span></code></li>
</ul>
<p>These modules are tied into the latter user-level classes called <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.AmiraHeader</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.AmiraFile</span></code> that do all the work for you. The :py:class`ahds.AmiraFile` class provides backwards compatibility for older user level Python code. For new projects and for using new features of <cite>ahds</cite> it is recommended to replace it by <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.AmiraHeader</span></code> class.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ahds</span> <span class="k">import</span> <span class="n">AmiraHeader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># read an AmiraMesh file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">am</span> <span class="o">=</span> <span class="n">AmiraHeader</span><span class="p">(</span><span class="s1">&#39;am/test7.am&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">am</span>
<span class="go">&lt;AmiraHeader with 4 bytes&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">am</span><span class="o">.</span><span class="n">Vertices</span><span class="o">.</span><span class="n">Vertices</span>
</pre></div>
</div>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># read an HyperSurface file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">surf</span> <span class="o">=</span> <span class="n">AmiraHeader</span><span class="p">(</span><span class="s1">&#39;surf/test4.surf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">surf</span><span class="o">.</span><span class="n">Vertices</span><span class="o">.</span><span class="n">Vertices</span>
</pre></div>
</div>
<div class="section" id="ahds-grammar">
<h3><a class="toc-backref" href="#id15"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.grammar</span></code></a><a class="headerlink" href="#ahds-grammar" title="Permalink to this headline">¶</a></h3>
<p>This module describes the header grammar for Amira (R) (AmiraMesh and HyperSurface) and so depends on <code class="xref py py-mod docutils literal notranslate"><span class="pre">simpleparse</span></code> and the <code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.core</span></code> module which defines the <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.grammar.AmiraDispatchProcessor</span></code> class. It defines functions for loading the raw header of AmiraMesh and HyperSurface files, accessing the AmiraMesh datastreams as well as parsing the HyperSurface data sections.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.grammar.AmiraDispatchProcessor</span></code> is a subclass of <code class="xref py py-class docutils literal notranslate"><span class="pre">simpleparse.dispatchprocessor</span></code> which implements the core functionality required to use the grammar. Each grammar token has a corresponding method defined on this class which determines how the data associated with that token will be rendered. Data can be rendered as a single or multimap, string, number, or in custom format.</p>
<ul class="simple">
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.grammar.get_header(fhnd,</span> <span class="pre">header_bytes=20000,</span> <span class="pre">verbose=False)()</span></code> returns the fileformat, parsed_header, residual bytes following the header portion and either None or the raw header bytes based on the identified file format.</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.grammar.next_amiramesh_binary_stream(fhnd,stream_bytes=32768,stream_data</span> <span class="pre">=</span> <span class="pre">_empty_stream_data,**kwargs)()</span></code> returns the bytes of the next binary amira mesh data stream following the current position within the file represented by fhnd file or file like object.</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.grammar.next_amiramesh_ascii_stream(fhnd,stream_bytes=32768,stream_data</span> <span class="pre">=</span> <span class="pre">_empty_stream_data,**kwargs)()</span></code> returns the bytes of the next ascii encoded amira mesh data stream following the current position within the file represented by fhnd file or file like object</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.grammar.parse_hypersurface_data(fhnd,parsed_data</span> <span class="pre">=</span> <span class="pre">dict(),verbose</span> <span class="pre">=</span> <span class="pre">False,stream_bytes=32768,stream_data</span> <span class="pre">=</span> <span class="pre">_empty_stream_data,**kwargs)()</span></code> parses the hyper surface data sections and inserts the content of the BounaryCurves, Patches and Surfaces sections into the parsed raw header dictionary represented by <cite>parsed_data</cite> argument. If the <cite>drop_data</cite> keyword argument is encountered and set to True the vertex, triangle, surface or boundary curve data streams will not be loaded.</li>
</ul>
</div>
<div class="section" id="ahds-header">
<h3><a class="toc-backref" href="#id16"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.header</span></code></a><a class="headerlink" href="#ahds-header" title="Permalink to this headline">¶</a></h3>
<p>This module converts the structured header from the <code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.grammar</span></code> module into an object with the sections of the header (<code class="docutils literal notranslate"><span class="pre">designation</span></code>, <code class="docutils literal notranslate"><span class="pre">definitions</span></code>, <code class="docutils literal notranslate"><span class="pre">parameters</span> <span class="pre">``and</span> <span class="pre">``data</span> <span class="pre">pointers</span></code>) and corresponding structured data available as attributes. That is, it converts the header:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># AmiraMesh BINARY-LITTLE-ENDIAN 2.1</span>


<span class="n">define</span> <span class="n">Lattice</span> <span class="mi">862</span> <span class="mi">971</span> <span class="mi">200</span>

<span class="n">Parameters</span> <span class="p">{</span>
    <span class="n">Materials</span> <span class="p">{</span>
        <span class="n">Exterior</span> <span class="p">{</span>
            <span class="n">Id</span> <span class="mi">1</span>
        <span class="p">}</span>
        <span class="n">Inside</span> <span class="p">{</span>
            <span class="n">Color</span> <span class="mf">0.64</span> <span class="mi">0</span> <span class="mf">0.8</span><span class="p">,</span>
            <span class="n">Id</span> <span class="mi">2</span>
        <span class="p">}</span>
        <span class="n">Mitochondria</span> <span class="p">{</span>
            <span class="n">Id</span> <span class="mi">3</span><span class="p">,</span>
            <span class="n">Color</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span>
        <span class="p">}</span>
        <span class="n">Mitochondria_</span> <span class="p">{</span>
            <span class="n">Id</span> <span class="mi">4</span><span class="p">,</span>
            <span class="n">Color</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span>
        <span class="p">}</span>
        <span class="n">mitochondria__</span> <span class="p">{</span>
            <span class="n">Id</span> <span class="mi">5</span><span class="p">,</span>
            <span class="n">Color</span> <span class="mi">0</span> <span class="mf">0.125</span> <span class="mi">1</span>
        <span class="p">}</span>
        <span class="n">NE</span> <span class="p">{</span>
            <span class="n">Id</span> <span class="mi">6</span><span class="p">,</span>
            <span class="n">Color</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">Content</span> <span class="s2">&quot;862x971x200 byte, uniform coordinates&quot;</span><span class="p">,</span>
    <span class="n">BoundingBox</span> <span class="mi">0</span> <span class="mf">13410.7</span> <span class="mi">0</span> <span class="mf">15108.4</span> <span class="mf">1121.45</span> <span class="mf">4221.01</span><span class="p">,</span>
    <span class="n">CoordType</span> <span class="s2">&quot;uniform&quot;</span>
<span class="p">}</span>

<span class="n">Lattice</span> <span class="p">{</span> <span class="n">byte</span> <span class="n">Labels</span> <span class="p">}</span> <span class="nd">@1</span><span class="p">(</span><span class="n">HxByteRLE</span><span class="p">,</span><span class="mi">4014522</span><span class="p">)</span>
</pre></div>
</div>
<p>into an <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code> object.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ahds.header</span> <span class="k">import</span> <span class="n">AmiraHeader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span> <span class="o">=</span> <span class="n">AmiraHeader</span><span class="p">(</span><span class="s1">&#39;am/test2.am&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">designation</span><span class="o">.</span><span class="n">attrs</span>
<span class="go">[&#39;filetype&#39;, &#39;dimension&#39;, &#39;format&#39;, &#39;version&#39;, &#39;extra_format&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">file_format</span>
<span class="go">&#39;AmiraMesh&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">dimension</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">format</span>
<span class="go">&#39;BINARY&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">endian</span>
<span class="go">&#39;LITTLE&#39;</span>
</pre></div>
</div>
<p>This module consists of one main class: <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code> is the user-level class</p>
<p>AmiraHeader has one constructor: <code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader(fn,</span> <span class="pre">*args,</span> <span class="pre">**kwargs)()</span></code> which takes an Amira (R) file by name and arguments and returns an <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code> object with all attributes set as described above.</p>
<ul class="simple">
<li>The raw data structured data is available as read-only property: <code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader.parsed_data</span></code></li>
<li>Internally the <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code> class implements a set of private methods which individually load the four data sections (<code class="docutils literal notranslate"><span class="pre">designation</span></code>, <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">declarations</span></code>, <code class="docutils literal notranslate"><span class="pre">parameters</span></code>, and <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">definitions</span></code>) into attributes of the <code class="xref py py-class docutils literal notranslate"><span class="pre">àhds.header.AmiraHeader</span></code> object.</li>
</ul>
</div>
<div class="section" id="ahds-core">
<h3><a class="toc-backref" href="#id17"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.core</span></code></a><a class="headerlink" href="#ahds-core" title="Permalink to this headline">¶</a></h3>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.core.Block</span></code> class is a container class which converts structured groups to attributes. It is the base class for all other ahds container classes including <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.AmiraFile</span></code> and has two main attributes:</p>
<ul class="simple">
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.core.Block.name</span></code> provides the name of the current block</li>
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.core.Block.parent</span></code> provides a link to the parent <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.core.Block</span></code> instance. Is automatically set to None if current <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.core.Block</span></code> does not belong to any <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.core.Block</span></code> hierarchy.</li>
</ul>
<p>Attributes which are specific for a single <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.core.Block</span></code> instance are created using the <a href="#id1"><span class="problematic" id="id2">:py:method:`ahds.core.Block..add_attr`</span></a> method and are only available and accessible on the instance they were defined for.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.core.ListBlock</span></code> class represents a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.core.Block</span></code> type objects.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Materials</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;Materials&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Materials</span><span class="o">.</span><span class="n">Exterior</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;Exterior&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.header.Block.attrs</span></code> provides the attributes available on this <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.Block</span></code></li>
</ul>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">designation</span><span class="o">.</span><span class="n">attrs</span>
<span class="go">[&#39;filetype&#39;, &#39;dimension&#39;, &#39;format&#39;, &#39;version&#39;, &#39;extra_format&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">designation</span><span class="o">.</span><span class="n">format</span>
<span class="go">&#39;BINARY-LITTLE-ENDIAN&#39;</span>
<span class="go">A given Materials block has two special features:</span>
<span class="go">Block.ids returns the list of ids for all materials. This is important when decoding HxByteRLE compressed data</span>
<span class="go">Block[id] returns the material for the given id using index notation.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Materials</span><span class="o">.</span><span class="n">ids</span>
<span class="go">[1, 2, 3, 4, 5, 6]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">attrs</span>
<span class="go">[&#39;Materials&#39;, &#39;Content&#39;, &#39;BoundingBox&#39;, &#39;CoordType&#39;]</span>
<span class="go"># ids attribute is only available for â€˜Materialâ€™ blocks within â€˜parametersâ€™ section</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Content</span><span class="o">.</span><span class="n">ids</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">AttributeError</span>: <span class="n">&#39;str&#39; object has no attribute &#39;ids&#39;</span>
<span class="go"># we can get the name of a material of the given id</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Materials</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;Mitochondria_&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="ahds-data-stream">
<h3><a class="toc-backref" href="#id18"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.data_stream</span></code></a><a class="headerlink" href="#ahds-data-stream" title="Permalink to this headline">¶</a></h3>
<p>This module implements a hierarchy of classes describing the data streams within Amira (R) files. It has 4 classes and seven functions</p>
<div class="section" id="classes">
<h4><a class="toc-backref" href="#id19">Classes</a><a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h4>
<p>There are two categories of classes:</p>
<ul class="simple">
<li>Classes describing Amira (R) data streams</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Classes describing AmiraMesh data streams</li>
<li>Classes describing HyperSurface data streams</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Classes describing special AmiraMesh FileTypes (AmiraMesh only)</li>
</ul>
</div>
<div class="section" id="functions">
<h4><a class="toc-backref" href="#id20">Functions</a><a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h4>
<p>The functions implemented in this module</p>
<ul class="simple">
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.data_stream.hxbyterle_decode()</span></code> decodes <code class="docutils literal notranslate"><span class="pre">HxByteRLE</span></code> data streams</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.data_stream.hxraw_decode()</span></code> returns the input data stream unchanged</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.data_stream.set_stream_policy()</span></code> sets the default stream loading policy which can be any of the followong constants</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><code class="xref py py-const docutils literal notranslate"><span class="pre">ahds.data_stream.HEADERONLY</span></code> only the AmiraMesh header data and HyperSurface structure is loaded the actual data is not read at all.</li>
<li><code class="xref py py-const docutils literal notranslate"><span class="pre">ahds.data_stream.ONDEMMAND</span></code> lazy loading. Content of data streams is loaded and decoded when the data attribute of the corresponding <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream</span></code> block is accessed for the first time</li>
<li><code class="xref py py-const docutils literal notranslate"><span class="pre">ahds.data_stream.IMMEDIATE</span></code> all data is loaded instantly along with the header data</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.data_stream.get_stream_policy()</span></code> returns the currently set stream loading policy</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.data_stream.select_array_block()</span></code> factory function instanticating the <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.core.Block</span></code> to be selected for a specific data declaration</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.data_stream.set_data_stream()</span></code> factory function instanticating the appropriate <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream</span></code> class for each datastream as described by the correponding data definition</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.data_stream.load_streams()</span></code> enforces immediate loading of all data streams. Is implicitly called by <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code> when <code class="docutils literal notranslate"><span class="pre">load_streams</span></code> argument is set to <code class="xref py py-const docutils literal notranslate"><span class="pre">ahds.data_stream.IMMEDIATE</span></code> or when calling:py:class:<cite>ahds.AmiraFile.read</cite> method of backward compatibility <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.AmiraFile</span></code> class.</li>
</ul>
</div>
<div class="section" id="id3">
<h4><a class="toc-backref" href="#id21">Classes</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<div class="section" id="classes-describing-amira-r-data-streams">
<h5><a class="toc-backref" href="#id22">Classes describing Amira (R) data streams</a><a class="headerlink" href="#classes-describing-amira-r-data-streams" title="Permalink to this headline">¶</a></h5>
<p>The following diagrams illustrates the hierarchy of classes:</p>
<img alt="_images/ahds_classes.png" src="_images/ahds_classes.png" />
<p>Classes describing Amira (R) data streams</p>
<ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream</span></code> is the abstract base class for all data stream classes and defines the following attributes:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream.data</span></code> - an <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> object</li>
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream._header</span></code> - reference to the <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code> object the data stream belongs to</li>
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream._stream_data</span></code> - the raw file data</li>
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream._offset</span></code> - byte offset of the data stream within the underlying AmiraMesh or HyperSurface file or None if data not yet loaded</li>
</ul>
<p>The special method <code class="xref py py-meth docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream.__getattr__()</span></code> handles the lazy loading of the data stream by calling the <code class="xref py py-meth docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream._read()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">ahds.data_strean.AmiraDataStrean._decode()</span></code> methods which must be implemented by any non abstract subclass.</p>
</div></blockquote>
<p>The two main subclasses of <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream</span></code> are <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraMeshDataStream</span></code>, which is a concrete class representing all AmiraMesh data streams, and <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraHxSurfaceDataStream</span></code>, which defines HyperSurface data streams.</p>
</div>
<div class="section" id="amiramesh-contenttype-classes">
<h5><a class="toc-backref" href="#id23">AmiraMesh ContentType classes</a><a class="headerlink" href="#amiramesh-contenttype-classes" title="Permalink to this headline">¶</a></h5>
<p>This kind of classes allows to adjust the structure of the <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code> object as indicated by the the special ContentType parameter. Currently the <code class="docutils literal notranslate"><span class="pre">HxSpreadSheet</span></code> conent type is supported throught the <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraSpreadSheet</span></code> class is supported.</p>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="ahds.html" class="btn btn-neutral float-right" title="ahds package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="ahds package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2017, EMBL-EBI.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>