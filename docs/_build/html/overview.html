

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ahds &mdash; ahds 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ahds package" href="ahds.html" />
    <link rel="prev" title="ahds package" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ahds
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">ahds</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#license">License</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#use-cases">Use Cases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#future-plans">Future Plans</a></li>
<li class="toctree-l2"><a class="reference internal" href="#background-and-definitions">Background and Definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#headers-in-detail">Headers in Detail</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-streams-in-detail">Data Streams in Detail</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ahds-modules"><code class="docutils literal notranslate"><span class="pre">ahds</span></code> Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ahds-grammar"><code class="docutils literal notranslate"><span class="pre">ahds.grammar</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#ahds-header"><code class="docutils literal notranslate"><span class="pre">ahds.header</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#ahds-data-stream"><code class="docutils literal notranslate"><span class="pre">ahds.data_stream</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#classes-in-detail">Classes in Detail</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ahds.html"><code class="docutils literal notranslate"><span class="pre">ahds</span></code> package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ahds</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li><code class="docutils literal notranslate"><span class="pre">ahds</span></code></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/overview.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ahds">
<h1><a class="toc-backref" href="#id1"><code class="docutils literal notranslate"><span class="pre">ahds</span></code></a><a class="headerlink" href="#ahds" title="Permalink to this headline">¶</a></h1>
<a class="reference external image-reference" href="https://ahds.readthedocs.io/en/latest/?badge=latest"><img alt="Documentation Status" src="https://readthedocs.org/projects/ahds/badge/?version=latest" /></a>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#ahds" id="id1"><code class="docutils literal notranslate"><span class="pre">ahds</span></code></a><ul>
<li><a class="reference internal" href="#overview" id="id2">Overview</a></li>
<li><a class="reference internal" href="#license" id="id3">License</a><ul>
<li><a class="reference internal" href="#use-cases" id="id4">Use Cases</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installation" id="id5">Installation</a></li>
<li><a class="reference internal" href="#getting-started" id="id6">Getting Started</a></li>
<li><a class="reference internal" href="#future-plans" id="id7">Future Plans</a></li>
<li><a class="reference internal" href="#background-and-definitions" id="id8">Background and Definitions</a><ul>
<li><a class="reference internal" href="#headers-in-detail" id="id9">Headers in Detail</a></li>
<li><a class="reference internal" href="#data-streams-in-detail" id="id10">Data Streams in Detail</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ahds-modules" id="id11"><code class="docutils literal notranslate"><span class="pre">ahds</span></code> Modules</a><ul>
<li><a class="reference internal" href="#ahds-grammar" id="id12"><a class="reference internal" href="ahds.html#module-ahds.grammar" title="ahds.grammar"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.grammar</span></code></a></a></li>
<li><a class="reference internal" href="#ahds-header" id="id13"><a class="reference internal" href="ahds.html#module-ahds.header" title="ahds.header"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.header</span></code></a></a></li>
<li><a class="reference internal" href="#ahds-data-stream" id="id14"><a class="reference internal" href="ahds.html#module-ahds.data_stream" title="ahds.data_stream"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.data_stream</span></code></a></a><ul>
<li><a class="reference internal" href="#classes" id="id15">Classes</a></li>
<li><a class="reference internal" href="#functions" id="id16">Functions</a></li>
<li><a class="reference internal" href="#classes-in-detail" id="id17">Classes in Detail</a><ul>
<li><a class="reference internal" href="#datastreams-class" id="id18">DataStreams class</a></li>
<li><a class="reference internal" href="#classes-describing-amira-r-data-streams" id="id19">Classes describing Amira (R) data streams</a></li>
<li><a class="reference internal" href="#conversion-classes" id="id20">Conversion classes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id2">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ahds</span></code> is a Python package to parse and handle Amira (R) files.
It was developed to facilitate reading of Amira (R) files as part of the <a class="reference external" href="https://sfftk.readthedocs.io">EMDB-SFF toolkit</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Amira (R) is a trademark of Thermo Fisher Scientific. This package is in no way affiliated with with Thermo Fisher Scientific.</p>
</div>
</div>
<div class="section" id="license">
<h2><a class="toc-backref" href="#id3">License</a><a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ahds</span></code> is free software and is provided under the terms of the Apache License, Version 2.0.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Copyright</span> <span class="mi">2017</span> <span class="n">EMBL</span> <span class="o">-</span> <span class="n">European</span> <span class="n">Bioinformatics</span> <span class="n">Institute</span>

<span class="n">Licensed</span> <span class="n">under</span> <span class="n">the</span> <span class="n">Apache</span> <span class="n">License</span><span class="p">,</span> <span class="n">Version</span> <span class="mf">2.0</span> <span class="p">(</span><span class="n">the</span> <span class="s2">&quot;License&quot;</span><span class="p">);</span>
<span class="n">you</span> <span class="n">may</span> <span class="ow">not</span> <span class="n">use</span> <span class="n">this</span> <span class="n">file</span> <span class="k">except</span> <span class="ow">in</span> <span class="n">compliance</span> <span class="k">with</span> <span class="n">the</span> <span class="n">License</span><span class="o">.</span>
<span class="n">You</span> <span class="n">may</span> <span class="n">obtain</span> <span class="n">a</span> <span class="n">copy</span> <span class="n">of</span> <span class="n">the</span> <span class="n">License</span> <span class="n">at</span>

<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">licenses</span><span class="o">/</span><span class="n">LICENSE</span><span class="o">-</span><span class="mf">2.0</span>

<span class="n">Unless</span> <span class="n">required</span> <span class="n">by</span> <span class="n">applicable</span> <span class="n">law</span> <span class="ow">or</span> <span class="n">agreed</span> <span class="n">to</span> <span class="ow">in</span> <span class="n">writing</span><span class="p">,</span>
<span class="n">software</span> <span class="n">distributed</span> <span class="n">under</span> <span class="n">the</span> <span class="n">License</span> <span class="ow">is</span> <span class="n">distributed</span> <span class="n">on</span> <span class="n">an</span>
<span class="s2">&quot;AS IS&quot;</span> <span class="n">BASIS</span><span class="p">,</span> <span class="n">WITHOUT</span> <span class="n">WARRANTIES</span> <span class="n">OR</span> <span class="n">CONDITIONS</span> <span class="n">OF</span> <span class="n">ANY</span> <span class="n">KIND</span><span class="p">,</span>
<span class="n">either</span> <span class="n">express</span> <span class="ow">or</span> <span class="n">implied</span><span class="o">.</span> <span class="n">See</span> <span class="n">the</span> <span class="n">License</span> <span class="k">for</span> <span class="n">the</span> <span class="n">specific</span>
<span class="n">language</span> <span class="n">governing</span> <span class="n">permissions</span> <span class="ow">and</span> <span class="n">limitations</span> <span class="n">under</span> <span class="n">the</span> <span class="n">License</span><span class="o">.</span>
</pre></div>
</div>
<div class="section" id="use-cases">
<h3><a class="toc-backref" href="#id4">Use Cases</a><a class="headerlink" href="#use-cases" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Detect and parse Amira (R) headers and return structured data</li>
<li>Decode data (<code class="docutils literal notranslate"><span class="pre">HxRLEByte</span></code>, <code class="docutils literal notranslate"><span class="pre">HxZip</span></code>)</li>
<li>Easy extensibility to handle previously unencountered data streams</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">ahds</span></code> was written and is maintained by Paul K. Korir but there is
<a class="reference external" href="https://github.com/emdb-empiar/ahds/blob/dev/CONTRIBUTORS.txt">a list of contributors</a>.
Feel free to join this initiative.</p>
</div>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#id5">Installation</a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ahds</span></code> works with Python 2.7, 3.5, 3.6 and 3.7. It requires <code class="docutils literal notranslate"><span class="pre">numpy</span></code> to build.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">numpy</span>
</pre></div>
</div>
<p>Afterwards you may run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">ahds</span>
</pre></div>
</div>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Figure out a way to avoid the need for <code class="docutils literal notranslate"><span class="pre">numpy</span></code> as part of the build.</p>
</div>
</div>
<div class="section" id="getting-started">
<h2><a class="toc-backref" href="#id6">Getting Started</a><a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>You can begin playing with <code class="docutils literal notranslate"><span class="pre">ahds</span></code> out of the box using the provided console command <code class="docutils literal notranslate"><span class="pre">ahds</span></code>.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span>me@home ~$ ahds ahds/data/FieldOnTetraMesh.am
********************************************************************************************************************************************
AMIRA (R) HEADER AND DATA STREAMS
--------------------------------------------------------------------------------------------------------------------------------------------
+-ahds/data/FieldOnTetraMesh.am                                                                  AmiraFile [is_parent? True ]
|  +-meta                                                                                            Block [is_parent? False]
|  |  +-file: ahds/data/FieldOnTetraMesh.am
|  |  +-header_length: 182
|  |  +-data_streams: 1
|  |  +-streams_loaded: False
|  +-header                                                                                    AmiraHeader [is_parent? True ]
|  |  +-filetype: AmiraMesh
|  |  +-dimension: 3D
|  |  +-format: BINARY
|  |  +-endian: BIG
|  |  +-version: 2.0
|  |  +-extra_format: None
|  |  +-Parameters                                                                                   Block [is_parent? False]
|  |  +-Tetrahedra                                                                                   Block [is_parent? False]
|  |  |  +-length: 23685
|  +-data_streams                                                                                    Block [is_parent? False]
********************************************************************************************************************************************
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ahds</span></code> command takes the following arguments</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span>me@home ~$ ahds -h
usage: ahds [-h] [-s] [-d] [-l] file [file ...]

Python tool to read and display Amira files

positional arguments:
  file                a valid Amira file with an optional block path

optional arguments:
  -h, --help          show this help message and exit
  -s, --load-streams  whether to load data streams or not [default: False]
  -d, --debug         display debugging information [default: False]
  -l, --literal       display the literal header [default: False]
</pre></div>
</div>
<p>You can specify a <strong>dotted path</strong> after the filename to only render that the content of that field in the header:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span>me@home ~$ ahds ahds/data/FieldOnTetraMesh.am header
***********************************************************************************************************************************
ahds: Displaying path &#39;header&#39;
-----------------------------------------------------------------------------------------------------------------------------------
+-header                                                                                       AmiraHeader [is_parent? True ]
|  +-filetype: AmiraMesh
|  +-dimension: 3D
|  +-format: BINARY
|  +-endian: BIG
|  +-version: 2.0
|  +-extra_format: None
|  +-Parameters                                                                                      Block [is_parent? False]
|  +-Tetrahedra                                                                                      Block [is_parent? False]
|  |  +-length: 23685
</pre></div>
</div>
<p>For debugging you can display the literal header (the exact header present in the file) using the <code class="docutils literal notranslate"><span class="pre">-l/--literal</span></code> flag.
Also, you can display the parsed data structure using the <code class="docutils literal notranslate"><span class="pre">-d/--debug</span></code> flag.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span>me@home ~$ ahds --literal --debug ahds/data/FieldOnTetraMesh.am
***********************************************************************************************************************************
ahds: Displaying literal header
-----------------------------------------------------------------------------------------------------------------------------------
# AmiraMesh 3D BINARY 2.0
# CreationDate: Tue Nov  2 11:46:31 2004


nTetrahedra 23685

TetrahedronData { float[3] Data } @1
Field { float[3] f } Constant(@1)

# Data section follows
***********************************************************************************************************************************
ahds: Displaying parsed header data
-----------------------------------------------------------------------------------------------------------------------------------
[{&#39;designation&#39;: {&#39;dimension&#39;: &#39;3D&#39;,
                  &#39;filetype&#39;: &#39;AmiraMesh&#39;,
                  &#39;format&#39;: &#39;BINARY&#39;,
                  &#39;version&#39;: &#39;2.0&#39;}},
 {&#39;comment&#39;: {&#39;date&#39;: &#39;Tue Nov  2 11:46:31 2004&#39;}},
 {&#39;array_declarations&#39;: [{&#39;array_dimension&#39;: 23685,
                          &#39;array_name&#39;: &#39;Tetrahedra&#39;}]},
 {&#39;data_definitions&#39;: [{&#39;array_reference&#39;: &#39;Tetrahedra&#39;,
                        &#39;data_dimension&#39;: 3,
                        &#39;data_index&#39;: 1,
                        &#39;data_name&#39;: &#39;Data&#39;,
                        &#39;data_type&#39;: &#39;float&#39;},
                       {&#39;array_reference&#39;: &#39;Field&#39;,
                        &#39;data_dimension&#39;: 3,
                        &#39;data_index&#39;: 1,
                        &#39;data_name&#39;: &#39;f&#39;,
                        &#39;data_type&#39;: &#39;float&#39;,
                        &#39;interpolation_method&#39;: &#39;Constant&#39;}]}]

********************************************************************************************************************************************
AMIRA (R) HEADER AND DATA STREAMS
--------------------------------------------------------------------------------------------------------------------------------------------
+-ahds/data/FieldOnTetraMesh.am                                                                  AmiraFile [is_parent? True ]
|  +-meta                                                                                            Block [is_parent? False]
|  |  +-file: ahds/data/FieldOnTetraMesh.am
|  |  +-header_length: 182
|  |  +-data_streams: 1
|  |  +-streams_loaded: False
|  +-header                                                                                    AmiraHeader [is_parent? True ]
|  |  +-filetype: AmiraMesh
|  |  +-dimension: 3D
|  |  +-format: BINARY
|  |  +-endian: BIG
|  |  +-version: 2.0
|  |  +-extra_format: None
|  |  +-Parameters                                                                                   Block [is_parent? False]
|  |  +-Tetrahedra                                                                                   Block [is_parent? False]
|  |  |  +-length: 23685
|  +-data_streams                                                                                    Block [is_parent? False]
********************************************************************************************************************************************
</pre></div>
</div>
<p>By default, data streams are not read — only the header is parsed. You may obtain the data streams using the
<code class="docutils literal notranslate"><span class="pre">-s/--load-streams</span></code> flag.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span>me@home ~$ ahds --load-streams ahds/data/FieldOnTetraMesh.am
********************************************************************************************************************************************
AMIRA (R) HEADER AND DATA STREAMS
--------------------------------------------------------------------------------------------------------------------------------------------
+-ahds/data/FieldOnTetraMesh.am                                                                  AmiraFile [is_parent? True ]
|  +-meta                                                                                            Block [is_parent? False]
|  |  +-file: ahds/data/FieldOnTetraMesh.am
|  |  +-header_length: 182
|  |  +-data_streams: 1
|  |  +-streams_loaded: True
|  +-header                                                                                    AmiraHeader [is_parent? True ]
|  |  +-filetype: AmiraMesh
|  |  +-dimension: 3D
|  |  +-format: BINARY
|  |  +-endian: BIG
|  |  +-version: 2.0
|  |  +-extra_format: None
|  |  +-Parameters                                                                                   Block [is_parent? False]
|  |  +-Tetrahedra                                                                                   Block [is_parent? False]
|  |  |  +-length: 23685
|  +-data_streams                                                                                    Block [is_parent? True ]
|  |  +-Data                                                                           AmiraMeshDataStream [is_parent? False]
|  |  |  +-data_index: 1
|  |  |  +-dimension: 3
|  |  |  +-type: float
|  |  |  +-interpolation_method: None
|  |  |  +-shape: 23685
|  |  |  +-format: None
|  |  |  +-data: [  0.8917308   0.9711809 300.       ],...,[  1.4390504   1.1243758 300.       ]
********************************************************************************************************************************************
</pre></div>
</div>
</div>
<div class="section" id="future-plans">
<h2><a class="toc-backref" href="#id7">Future Plans</a><a class="headerlink" href="#future-plans" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Write out valid Amira (R) files</li>
</ul>
</div>
<div class="section" id="background-and-definitions">
<h2><a class="toc-backref" href="#id8">Background and Definitions</a><a class="headerlink" href="#background-and-definitions" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ahds</span></code> presently handles two types of Amira (R) files:</p>
<ul class="simple">
<li><cite>AmiraMesh</cite> files, which typically but not necessarily have a <code class="docutils literal notranslate"><span class="pre">.am</span></code>, <code class="docutils literal notranslate"><span class="pre">.elm</span></code>, <code class="docutils literal notranslate"><span class="pre">.lmb</span></code> extension, and</li>
<li><cite>HyperSurface</cite> files, which have <code class="docutils literal notranslate"><span class="pre">.surf</span></code> and represent an older filetype.</li>
</ul>
<p>Both file types consist of two parts:</p>
<ul class="simple">
<li>a <cite>header</cite>, and</li>
<li>one or more <cite>data streams</cite>.</li>
</ul>
<p>Headers are structured in a modified VRML-like syntax and differ between AmiraMesh and HyperSurface files in some of
the keywords used.</p>
<p>A data stream is a sequence of encoded bytes either referred to in the header by some delimiter
(usually <code class="docutils literal notranslate"><span class="pre">&#64;&lt;data_stream_index&gt;</span></code>, where <code class="docutils literal notranslate"><span class="pre">&lt;data_stream_index&gt;</span></code> is an integer) or a set of structural keywords
(e.g. <code class="docutils literal notranslate"><span class="pre">Vertices</span></code>, <code class="docutils literal notranslate"><span class="pre">Patches</span></code>) expected in a predefined sequence.</p>
<div class="section" id="headers-in-detail">
<h3><a class="toc-backref" href="#id9">Headers in Detail</a><a class="headerlink" href="#headers-in-detail" title="Permalink to this headline">¶</a></h3>
<p>AmiraMesh and HyperSurface headers can be divided into four main sections:</p>
<ul class="simple">
<li><strong>designation</strong></li>
<li><strong>definitions</strong></li>
<li><strong>parameters</strong>, and</li>
<li><strong>data pointers</strong>.</li>
</ul>
<p>The <cite>designation</cite> is the first line and conveys several important details about the format and structure of the file such as:</p>
<ul class="simple">
<li>filetype (either <code class="docutils literal notranslate"><span class="pre">AmiraMesh</span></code> or <code class="docutils literal notranslate"><span class="pre">HyperSurface</span></code>)</li>
<li>dimensionality (<code class="docutils literal notranslate"><span class="pre">3D</span></code>)</li>
<li>format (<code class="docutils literal notranslate"><span class="pre">BINARY-LITTLE-ENDIAN</span></code>, <code class="docutils literal notranslate"><span class="pre">BINARY</span></code> or <code class="docutils literal notranslate"><span class="pre">ASCII</span></code>)</li>
<li>version (a decimal number e.g. <code class="docutils literal notranslate"><span class="pre">2.1</span></code></li>
<li>extra format data e.g. <code class="docutils literal notranslate"><span class="pre">&lt;hxsurface&gt;</span></code> specifying that an AmiraMesh file will contain HyperSurface data</li>
</ul>
<p>A series of <cite>definitions</cite> follow that refer to data found in the data pointer sections that either begin with the word â€˜defineâ€™ or have â€˜nâ€™ prepended to a variable. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">define</span> <span class="n">Lattice</span> <span class="mi">862</span> <span class="mi">971</span> <span class="mi">200</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nVertices</span> <span class="mi">85120</span>
</pre></div>
</div>
<p>This is followed by grouped <cite>parameters</cite> enclosed in a series of braces beginning with the word â€˜Parametersâ€™. Various parameters are then enclosed each beginning with the name of that group of parameters e.g. â€˜Materialsâ€™</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Parameters {
    # grouped parameters
    Material {
        # the names of various materials with attributes
        Exterior {
            id 0
        }
        Inside {
            id 1,
            Color 0 1 1,
            Transparency 0.5
        }
    }
    Patches {
    # patch attributes
        InnerRegion â€œInsideâ€,
        OuterRegion â€œExteriorâ€,
        BoundaryID 0,
        BranchingPoints 0
    }
    # inline parameters
    GridSize &lt;value&gt;,
    â€¦
}
</pre></div>
</div>
<p>The most important set of parameters are materials as these specify colours and identities of distinct segments/datasets within the file.</p>
<p>Finally, AmiraMesh files list a set of <cite>data pointers</cite> that point to data labels within the file together with additional information to decode the data. We refer to these as data streams because they consist of continuous streams of raw byte data that need to be decoded. Here is an example of data pointers that refer to the location of 3D surface primitives:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Vertices</span> <span class="p">{</span> <span class="nb">float</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="n">Vertices</span> <span class="p">}</span> <span class="nd">@1</span>
<span class="n">TriangleData</span> <span class="p">{</span> <span class="nb">int</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="n">Triangles</span> <span class="p">}</span> <span class="nd">@2</span>
<span class="n">Patches</span><span class="o">-</span><span class="mi">0</span> <span class="p">{</span> <span class="nb">int</span> <span class="n">Patches</span><span class="o">-</span><span class="mi">0</span> <span class="p">}</span> <span class="nd">@3</span>
</pre></div>
</div>
<p>These refer to three raw data streams each found beginning with the delimiter <code class="docutils literal notranslate"><span class="pre">&#64;&lt;number&gt;</span></code>. Data stream one (<code class="docutils literal notranslate"><span class="pre">&#64;1</span></code>) is called <code class="docutils literal notranslate"><span class="pre">Vertices</span></code> and consists of float triples, two is called <code class="docutils literal notranslate"><span class="pre">TriangleData</span></code> and has integer 7-tuples and three called <code class="docutils literal notranslate"><span class="pre">Patches-</span></code> is a single integer (the number of patches). In some cases the data pointer contains the data encoding for the corresponding data pointer.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Lattice</span> <span class="p">{</span> <span class="n">byte</span> <span class="n">Labels</span> <span class="p">}</span> <span class="nd">@1</span><span class="p">(</span><span class="n">HxByteRLE</span><span class="p">,</span><span class="mi">234575740</span><span class="p">)</span>
</pre></div>
</div>
<p>which is a run-length encoded data stream of the specified length, while</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Lattice</span> <span class="p">{</span> <span class="n">byte</span> <span class="n">Data</span> <span class="p">}</span> <span class="nd">@1</span><span class="p">(</span><span class="n">HxZip</span><span class="p">,</span><span class="mi">919215</span><span class="p">)</span>
</pre></div>
</div>
<p>contains zipped data of the specified length.</p>
</div>
<div class="section" id="data-streams-in-detail">
<h3><a class="toc-backref" href="#id10">Data Streams in Detail</a><a class="headerlink" href="#data-streams-in-detail" title="Permalink to this headline">¶</a></h3>
<p>AmiraMesh data streams are very simple. They always have a start delimiter made of <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> with an index that identifies the data stream. A newline character separates the delimiter with the data stream proper which is either plain ASCII or a binary stream (raw, zipped or encoded).</p>
<p>HyperSurface data streams structured to have the following sections:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Header</span>
<span class="n">Vertices</span> <span class="o">&lt;</span><span class="n">nvertices</span><span class="o">&gt;</span>
<span class="c1"># vertices data stream</span>

<span class="n">NBranchingPoints</span> <span class="o">&lt;</span><span class="n">nbranching_points</span><span class="o">&gt;</span>
<span class="n">NVerticesOnCurves</span> <span class="o">&lt;</span><span class="n">nvertices_on_curves</span><span class="o">&gt;</span>
<span class="n">BoundaryCurves</span> <span class="o">&lt;</span><span class="n">nboundary_curves</span><span class="o">&gt;</span>
<span class="n">Patches</span> <span class="o">&lt;</span><span class="n">npatches</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="n">InnerRegion</span> <span class="o">&lt;</span><span class="n">inner_region_name</span><span class="o">&gt;</span>
<span class="n">OuterRegion</span> <span class="o">&lt;</span><span class="n">outer_region_name</span><span class="o">&gt;</span>
<span class="n">BoundaryID</span> <span class="o">&lt;</span><span class="n">boundary_id</span><span class="o">&gt;</span>
<span class="n">BranchingPoints</span> <span class="o">&lt;</span><span class="n">nbranching_points</span><span class="o">&gt;</span>
<span class="n">Triangles</span> <span class="o">&lt;</span><span class="n">ntriangles</span><span class="o">&gt;</span>
<span class="c1"># triangles data stream</span>
<span class="p">}</span> <span class="c1"># repeats for as &lt;npatches&gt; times</span>
</pre></div>
</div>
<p>HyperSurface data streams can be either plain ASCII or binary.</p>
</div>
</div>
<div class="section" id="ahds-modules">
<h2><a class="toc-backref" href="#id11"><code class="docutils literal notranslate"><span class="pre">ahds</span></code> Modules</a><a class="headerlink" href="#ahds-modules" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ahds</span></code> has three main modules:</p>
<ul class="simple">
<li><a class="reference internal" href="ahds.html#module-ahds.grammar" title="ahds.grammar"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.grammar</span></code></a> specifies an EBNF grammar</li>
<li><a class="reference internal" href="ahds.html#module-ahds.header" title="ahds.header"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.header</span></code></a></li>
<li><a class="reference internal" href="ahds.html#module-ahds.data_stream" title="ahds.data_stream"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.data_stream</span></code></a></li>
</ul>
<p>These modules are tied into a user-level class called <a class="reference internal" href="ahds.html#ahds.AmiraFile" title="ahds.AmiraFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.AmiraFile</span></code></a> that does all the work for you.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ahds</span> <span class="k">import</span> <span class="n">AmiraFile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># read an AmiraMesh file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">af</span> <span class="o">=</span> <span class="n">AmiraFile</span><span class="p">(</span><span class="s1">&#39;am/test7.am&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">af</span><span class="o">.</span><span class="n">header</span>
<span class="go">&lt;AmiraHeader with 4 bytes&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># empty data streams</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">af</span><span class="o">.</span><span class="n">data_streams</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">af</span><span class="o">.</span><span class="n">data_streams</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># we have to explicitly read to get the data streams</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">af</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">af</span><span class="o">.</span><span class="n">data_streams</span>
<span class="go">&lt;class &#39;ahds.data_stream.DataStreams&#39;&gt; object with 13 stream(s): 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">af</span><span class="o">.</span><span class="n">data_streams</span><span class="p">:</span>
<span class="gp">... </span>  <span class="nb">print</span> <span class="n">ds</span>
<span class="gp">...</span>
<span class="go">&lt;class &#39;ahds.data_stream.AmiraMeshDataStream&#39;&gt; object of 2,608 bytes</span>
<span class="go">&lt;class &#39;ahds.data_stream.AmiraMeshDataStream&#39;&gt; object of 2,608 bytes</span>
<span class="go">&lt;class &#39;ahds.data_stream.AmiraMeshDataStream&#39;&gt; object of 2,608 bytes</span>
<span class="go">&lt;class &#39;ahds.data_stream.AmiraMeshDataStream&#39;&gt; object of 2,608 bytes</span>
<span class="go">&lt;class &#39;ahds.data_stream.AmiraMeshDataStream&#39;&gt; object of 2,608 bytes</span>
<span class="go">&lt;class &#39;ahds.data_stream.AmiraMeshDataStream&#39;&gt; object of 2,608 bytes</span>
<span class="go">&lt;class &#39;ahds.data_stream.AmiraMeshDataStream&#39;&gt; object of 2,608 bytes</span>
<span class="go">&lt;class &#39;ahds.data_stream.AmiraMeshDataStream&#39;&gt; object of 2,608 bytes</span>
<span class="go">&lt;class &#39;ahds.data_stream.AmiraMeshDataStream&#39;&gt; object of 2,608 bytes</span>
<span class="go">&lt;class &#39;ahds.data_stream.AmiraMeshDataStream&#39;&gt; object of 2,608 bytes</span>
<span class="go">&lt;class &#39;ahds.data_stream.AmiraMeshDataStream&#39;&gt; object of 2,608 bytes</span>
<span class="go">&lt;class &#39;ahds.data_stream.AmiraMeshDataStream&#39;&gt; object of 2,608 bytes</span>
<span class="go">&lt;class &#39;ahds.data_stream.AmiraMeshDataStream&#39;&gt; object of 2,608 bytes</span>
<span class="go"># we get the n-th data stream using the index/key notation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">af</span><span class="o">.</span><span class="n">data_streams</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">encoded_data</span>
<span class="go">&#39;1 \n2 \n3 \n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">af</span><span class="o">.</span><span class="n">data_streams</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">decoded_data</span>
<span class="go">[1, 2, 3]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">af</span><span class="o">.</span><span class="n">data_streams</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">encoded_data</span>
<span class="go">&#39;69 \n120 \n116 \n101 \n114 \n105 \n111 \n114 \n0 \n73 \n110 \n115 \n105 \n100 \n101 \n0 \n109 \n111 \n108 \n101 \n99 \n117 \n108 \n101 \n0 \n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">af</span><span class="o">.</span><span class="n">data_streams</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">decoded_data</span>
<span class="go">[69, 120, 116, 101, 114, 105, 111, 114, 0, 73, 110, 115, 105, 100, 101, 0, 109, 111, 108, 101, 99, 117, 108, 101, 0]</span>
</pre></div>
</div>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># read an HyperSurface file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">af</span> <span class="o">=</span> <span class="n">AmiraFile</span><span class="p">(</span><span class="s1">&#39;surf/test4.surf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">af</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">af</span><span class="o">.</span><span class="n">data_streams</span>
<span class="go">&lt;class &#39;ahds.data_stream.DataStreams&#39;&gt; object with 5 stream(s): Patches, NBranchingPoints, BoundaryCurves, Vertices, NVerticesOnCurves</span>
<span class="go"># HyperSurface files have pre-set data streams</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">af</span><span class="o">.</span><span class="n">data_streams</span><span class="p">[</span><span class="s1">&#39;Vertices&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">decoded_data</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
<span class="go">[(560.0, 243.0, 60.96875), (560.0, 242.9166717529297, 61.0), (559.5, 243.0, 61.0), (561.0, 243.0, 60.95833206176758), (561.0, 242.5, 61.0), (561.0384521484375, 243.0, 61.0), (559.0, 244.0, 60.94444274902344), (559.0, 243.5, 61.0), (558.9722290039062, 244.0, 61.0), (560.0, 244.0, 60.459999084472656)]</span>
</pre></div>
</div>
<div class="section" id="ahds-grammar">
<h3><a class="toc-backref" href="#id12"><a class="reference internal" href="ahds.html#module-ahds.grammar" title="ahds.grammar"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.grammar</span></code></a></a><a class="headerlink" href="#ahds-grammar" title="Permalink to this headline">¶</a></h3>
<p>This module describes the header grammar for Amira (R) (AmiraMesh and HyperSurface) files and so depends on <code class="xref py py-mod docutils literal notranslate"><span class="pre">simpleparse</span></code> Python package. It defines a single class (<code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.grammar.AmiraDispatchProcessor</span></code>) and four functions.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.grammar.AmiraDispatchProcessor</span></code> is a subclass of <code class="xref py py-class docutils literal notranslate"><span class="pre">simpleparse.dispatchprocessor</span></code> which implements the core functionality required to use the grammar. Each grammar token has a corresponding method defined on this class which determines how the data associated with that token will be rendered. Data can be rendered as a single or multimap, string, number, or in custom format.</p>
<ul class="simple">
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.grammar.get_parsed_data(fn,</span> <span class="pre">*args,</span> <span class="pre">**kwargs)()</span></code> is the user-level function that takes a filename and returns structured parsed data. It depends on the other three functions defined:</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.grammar.detect_format(fn,</span> <span class="pre">format_bytes=50,</span> <span class="pre">verbose=False)()</span></code> returns either <code class="docutils literal notranslate"><span class="pre">AmiraMesh</span></code> or <code class="docutils literal notranslate"><span class="pre">HyperSurface</span></code> given a file name and arguments,</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.grammar.get_header(fn,</span> <span class="pre">file_format,</span> <span class="pre">header_bytes=20000,</span> <span class="pre">verbose=False)()</span></code> returns the header portion based on the file format determined by detect_format(…), and</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.grammar.parse_header(data,</span> <span class="pre">verbose=False)()</span></code> converts the raw header data returned by <code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.grammar.get_header(...)()</span></code> into a structured header based on AmiraDispatchProcessor.</li>
</ul>
</div>
<div class="section" id="ahds-header">
<h3><a class="toc-backref" href="#id13"><a class="reference internal" href="ahds.html#module-ahds.header" title="ahds.header"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.header</span></code></a></a><a class="headerlink" href="#ahds-header" title="Permalink to this headline">¶</a></h3>
<p>This module converts the structured header from the <a class="reference internal" href="ahds.html#module-ahds.grammar" title="ahds.grammar"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.grammar</span></code></a> module into an object with the sections of the header (<code class="docutils literal notranslate"><span class="pre">designation</span></code>, <code class="docutils literal notranslate"><span class="pre">definitions</span></code>, <code class="docutils literal notranslate"><span class="pre">parameters</span> <span class="pre">``and</span> <span class="pre">``data</span> <span class="pre">pointers</span></code>) and corresponding structured data available as attributes. That is, it converts the header:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># AmiraMesh BINARY-LITTLE-ENDIAN 2.1</span>


<span class="n">define</span> <span class="n">Lattice</span> <span class="mi">862</span> <span class="mi">971</span> <span class="mi">200</span>

<span class="n">Parameters</span> <span class="p">{</span>
    <span class="n">Materials</span> <span class="p">{</span>
        <span class="n">Exterior</span> <span class="p">{</span>
            <span class="n">Id</span> <span class="mi">1</span>
        <span class="p">}</span>
        <span class="n">Inside</span> <span class="p">{</span>
            <span class="n">Color</span> <span class="mf">0.64</span> <span class="mi">0</span> <span class="mf">0.8</span><span class="p">,</span>
            <span class="n">Id</span> <span class="mi">2</span>
        <span class="p">}</span>
        <span class="n">Mitochondria</span> <span class="p">{</span>
            <span class="n">Id</span> <span class="mi">3</span><span class="p">,</span>
            <span class="n">Color</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span>
        <span class="p">}</span>
        <span class="n">Mitochondria_</span> <span class="p">{</span>
            <span class="n">Id</span> <span class="mi">4</span><span class="p">,</span>
            <span class="n">Color</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span>
        <span class="p">}</span>
        <span class="n">mitochondria__</span> <span class="p">{</span>
            <span class="n">Id</span> <span class="mi">5</span><span class="p">,</span>
            <span class="n">Color</span> <span class="mi">0</span> <span class="mf">0.125</span> <span class="mi">1</span>
        <span class="p">}</span>
        <span class="n">NE</span> <span class="p">{</span>
            <span class="n">Id</span> <span class="mi">6</span><span class="p">,</span>
            <span class="n">Color</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">Content</span> <span class="s2">&quot;862x971x200 byte, uniform coordinates&quot;</span><span class="p">,</span>
    <span class="n">BoundingBox</span> <span class="mi">0</span> <span class="mf">13410.7</span> <span class="mi">0</span> <span class="mf">15108.4</span> <span class="mf">1121.45</span> <span class="mf">4221.01</span><span class="p">,</span>
    <span class="n">CoordType</span> <span class="s2">&quot;uniform&quot;</span>
<span class="p">}</span>

<span class="n">Lattice</span> <span class="p">{</span> <span class="n">byte</span> <span class="n">Labels</span> <span class="p">}</span> <span class="nd">@1</span><span class="p">(</span><span class="n">HxByteRLE</span><span class="p">,</span><span class="mi">4014522</span><span class="p">)</span>
</pre></div>
</div>
<p>into an <a class="reference internal" href="ahds.html#ahds.header.AmiraHeader" title="ahds.header.AmiraHeader"><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code></a> object.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ahds.header</span> <span class="k">import</span> <span class="n">AmiraHeader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span> <span class="o">=</span> <span class="n">AmiraHeader</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s1">&#39;am/test2.am&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">designation</span><span class="o">.</span><span class="n">attrs</span>
<span class="go">[&#39;filetype&#39;, &#39;dimension&#39;, &#39;format&#39;, &#39;version&#39;, &#39;extra_format&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">designation</span><span class="o">.</span><span class="n">filetype</span>
<span class="go">&#39;AmiraMesh&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">designation</span><span class="o">.</span><span class="n">dimension</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">designation</span><span class="o">.</span><span class="n">format</span>
<span class="go">&#39;BINARY-LITTLE-ENDIAN&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">definitions</span><span class="o">.</span><span class="n">attrs</span>
<span class="go">[&#39;Lattice&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">definitions</span><span class="o">.</span><span class="n">Lattice</span>
<span class="go">[862, 971, 200]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">attrs</span>
<span class="go">[&#39;Materials&#39;, &#39;Content&#39;, &#39;BoundingBox&#39;, &#39;CoordType&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Materials</span><span class="o">.</span><span class="n">attrs</span>
<span class="go">[&#39;Exterior&#39;, &#39;Inside&#39;, &#39;Mitochondria&#39;, &#39;Mitochondria_&#39;, &#39;mitochondria__&#39;, &#39;NE&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Materials</span><span class="o">.</span><span class="n">Exterior</span><span class="o">.</span><span class="n">attrs</span>
<span class="go">[&#39;Id&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Materials</span><span class="o">.</span><span class="n">Exterior</span><span class="o">.</span><span class="n">Id</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Content</span>
<span class="go">&#39;&quot;862x971x200 byte, uniform coordinates&quot;,&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">BoundingBox</span>
<span class="go">[0, 13410.7, 0, 15108.4, 1121.45, 4221.01]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">CoordType</span>
<span class="go">&#39;&quot;uniform&quot;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">data_pointers</span><span class="o">.</span><span class="n">attrs</span>
<span class="go">[&#39;data_pointer_1&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">data_pointers</span><span class="o">.</span><span class="n">data_pointer_1</span><span class="o">.</span><span class="n">attrs</span>
<span class="go">[&#39;pointer_name&#39;, &#39;data_format&#39;, &#39;data_dimension&#39;, &#39;data_type&#39;, &#39;data_name&#39;, &#39;data_index&#39;, &#39;data_length&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">data_pointers</span><span class="o">.</span><span class="n">data_pointer_1</span><span class="o">.</span><span class="n">pointer_name</span>
<span class="go">&#39;Lattice&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">data_pointers</span><span class="o">.</span><span class="n">data_pointer_1</span><span class="o">.</span><span class="n">data_format</span>
<span class="go">&#39;HxByteRLE&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">data_pointers</span><span class="o">.</span><span class="n">data_pointer_1</span><span class="o">.</span><span class="n">data_dimension</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">data_pointers</span><span class="o">.</span><span class="n">data_pointer_1</span><span class="o">.</span><span class="n">data_type</span>
<span class="go">&#39;byte&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">data_pointers</span><span class="o">.</span><span class="n">data_pointer_1</span><span class="o">.</span><span class="n">data_name</span>
<span class="go">&#39;Labels&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">data_pointers</span><span class="o">.</span><span class="n">data_pointer_1</span><span class="o">.</span><span class="n">data_index</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">data_pointers</span><span class="o">.</span><span class="n">data_pointer_1</span><span class="o">.</span><span class="n">data_length</span>
<span class="go">4014522</span>
</pre></div>
</div>
<p>This module consists of two main classes: <a class="reference internal" href="ahds.html#ahds.header.AmiraHeader" title="ahds.header.AmiraHeader"><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code></a> is the user-level class and <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.Block</span></code> which is a container class for a block of structured data from an Amira (R) header.</p>
<p>AmiraHeader has one constructor: <code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader.from_file(fn,</span> <span class="pre">*args,</span> <span class="pre">**kwargs)()</span></code> which takes an Amira (R) file by name and arguments and returns an <a class="reference internal" href="ahds.html#ahds.header.AmiraHeader" title="ahds.header.AmiraHeader"><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code></a> object with all attributes set as described above. Alternatively, one can use the initiator form to pass structured data directly: <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader(parsed_data)</span></code> which returns an <a class="reference internal" href="ahds.html#ahds.header.AmiraHeader" title="ahds.header.AmiraHeader"><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code></a> object configured appropriately.</p>
<ul class="simple">
<li>The raw data structured data is available as read-only property: <code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader.raw_header</span></code></li>
<li>Internally the <a class="reference internal" href="ahds.html#ahds.header.AmiraHeader" title="ahds.header.AmiraHeader"><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code></a> class implements a set of private methods which individually load the four data sections (<code class="docutils literal notranslate"><span class="pre">designation</span></code>, <code class="docutils literal notranslate"><span class="pre">definitions</span></code>, <code class="docutils literal notranslate"><span class="pre">parameters</span></code>, and <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">pointers</span></code>).</li>
</ul>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.Block</span></code> class is a container class which converts structured groups to attributes and has two main attributes:</p>
<ul class="simple">
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.header.Block.name</span></code> provides the name of the current block</li>
</ul>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">designation</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;designation&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Materials</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;Materials&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Materials</span><span class="o">.</span><span class="n">Exterior</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;Exterior&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.header.Block.attrs</span></code> provides the attributes available on this <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.Block</span></code></li>
</ul>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">designation</span><span class="o">.</span><span class="n">attrs</span>
<span class="go">[&#39;filetype&#39;, &#39;dimension&#39;, &#39;format&#39;, &#39;version&#39;, &#39;extra_format&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">designation</span><span class="o">.</span><span class="n">format</span>
<span class="go">&#39;BINARY-LITTLE-ENDIAN&#39;</span>
<span class="go">A given Materials block has two special features:</span>
<span class="go">Block.ids returns the list of ids for all materials. This is important when decoding HxByteRLE compressed data</span>
<span class="go">Block[id] returns the material for the given id using index notation.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Materials</span><span class="o">.</span><span class="n">ids</span>
<span class="go">[1, 2, 3, 4, 5, 6]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">attrs</span>
<span class="go">[&#39;Materials&#39;, &#39;Content&#39;, &#39;BoundingBox&#39;, &#39;CoordType&#39;]</span>
<span class="go"># ids attribute is only available for â€˜Materialâ€™ blocks within â€˜parametersâ€™ section</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Content</span><span class="o">.</span><span class="n">ids</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">AttributeError</span>: <span class="n">&#39;str&#39; object has no attribute &#39;ids&#39;</span>
<span class="go"># we can get the name of a material of the given id</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amira_header</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Materials</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;Mitochondria_&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="ahds-data-stream">
<h3><a class="toc-backref" href="#id14"><a class="reference internal" href="ahds.html#module-ahds.data_stream" title="ahds.data_stream"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ahds.data_stream</span></code></a></a><a class="headerlink" href="#ahds-data-stream" title="Permalink to this headline">¶</a></h3>
<p>This is most complex module implementing a hierarchy of classes describing various data streams within Amira (R) files. It has 22 classes and five functions</p>
<div class="section" id="classes">
<h4><a class="toc-backref" href="#id15">Classes</a><a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h4>
<p>There are three categories of classes:</p>
<ul class="simple">
<li>A user-level class that encapsulates (2) below.</li>
<li>Classes describing Amira (R) data streams</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Classes describing AmiraMesh data streams</li>
<li>Classes describing HyperSurface data streams</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Data conversion classes (AmiraMesh only)</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Classes abstracting images</li>
<li>Classes abstracting contours</li>
</ul>
</div></blockquote>
<p>The user-level <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.DataStreams</span></code> class is the preferred way to use the module. It takes the name of an Amira (R) file and encapsulates an iterator of data streams.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ahds</span> <span class="k">import</span> <span class="n">data_stream</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_streams</span> <span class="o">=</span> <span class="n">data_stream</span><span class="o">.</span><span class="n">DataStreams</span><span class="p">(</span><span class="s1">&#39;am/test6.am&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_streams</span>
<span class="go">&lt;class &#39;ahds.data_stream.DataStreams&#39;&gt; object with 2 stream(s): 1, 2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">data_streams</span><span class="p">:</span>
<span class="gp">... </span>  <span class="nb">print</span> <span class="n">ds</span>
<span class="gp">...</span>
<span class="go">&lt;class &#39;ahds.data_stream.AmiraMeshDataStream&#39;&gt; object of 968,909 bytes</span>
<span class="go">&lt;class &#39;ahds.data_stream.AmiraMeshDataStream&#39;&gt; object of 968,909 bytes</span>
</pre></div>
</div>
</div>
<div class="section" id="functions">
<h4><a class="toc-backref" href="#id16">Functions</a><a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h4>
<p>The functions implemented in this module decode data streams.</p>
<ul class="simple">
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.data_stream.hxbyterle_decode()</span></code> decodes <code class="docutils literal notranslate"><span class="pre">HxByteRLE</span></code> data streams</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.data_stream.hxzip_decode(data_size,</span> <span class="pre">data)()</span></code> unzips zlib-compressed data streams</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.data_stream.unpack_binary(data_pointer,</span> <span class="pre">definitions,</span> <span class="pre">data)()</span></code> unpacks the structured data stream according to the attributes specified in the dataâ€™s data pointer</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ahds.data_stream.unpack_ascii(data)()</span></code> converts rows of ASCII data into numerical data</li>
</ul>
</div>
<div class="section" id="classes-in-detail">
<h4><a class="toc-backref" href="#id17">Classes in Detail</a><a class="headerlink" href="#classes-in-detail" title="Permalink to this headline">¶</a></h4>
<div class="section" id="datastreams-class">
<h5><a class="toc-backref" href="#id18">DataStreams class</a><a class="headerlink" href="#datastreams-class" title="Permalink to this headline">¶</a></h5>
<p>The following attributes are available on objects of this class:</p>
<ul class="simple">
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.DataStreams.file</span></code> - filename of Amira (R) file</li>
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.DataStreams.header</span></code> - an object of class <a class="reference internal" href="ahds.html#ahds.header.AmiraHeader" title="ahds.header.AmiraHeader"><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code></a> encapsulating the header data in four sections (<code class="docutils literal notranslate"><span class="pre">designation</span></code>, <code class="docutils literal notranslate"><span class="pre">definitions</span></code>, <code class="docutils literal notranslate"><span class="pre">parameters</span></code>, and <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">pointers</span></code>)</li>
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.DataStreams.filetype</span></code> - the filetype as specified in (ii) above.</li>
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.DataStreams.stream_data</span></code> - all raw data from the file (including the header)</li>
<li><code class="docutils literal notranslate"><span class="pre">len(DataStreams)</span></code> - the number of data streams contained</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.DataStreams[&lt;index&gt;]</span></code> - returns the data stream of the index specified (as defined in the data_pointers section of the header object</li>
</ul>
</div>
<div class="section" id="classes-describing-amira-r-data-streams">
<h5><a class="toc-backref" href="#id19">Classes describing Amira (R) data streams</a><a class="headerlink" href="#classes-describing-amira-r-data-streams" title="Permalink to this headline">¶</a></h5>
<p>The following diagrams illustrates the hierarchy of classes:</p>
<img alt="_images/ahds_classes.png" src="_images/ahds_classes.png" />
<p>Classes describing Amira (R) data streams</p>
<ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream</span></code> is the base class for all data stream classes and defines the following attributes:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream.header</span></code> - an <a class="reference internal" href="ahds.html#ahds.header.AmiraHeader" title="ahds.header.AmiraHeader"><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader</span></code></a> object</li>
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream.data_pointer</span></code> - the <code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.header.AmiraHeader.data_pointers.data_pointer_X</span></code> for this data stream</li>
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream.stream_data</span></code> - the raw file data</li>
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream.encoded_data</span></code> - the encoded data for this stream; <code class="docutils literal notranslate"><span class="pre">None</span></code> for <code class="docutils literal notranslate"><span class="pre">VoidDataStream</span></code> subclasses</li>
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream.decoded_data</span></code> - the decoded data for this stream; <code class="docutils literal notranslate"><span class="pre">None</span></code> for <code class="docutils literal notranslate"><span class="pre">VoidDataStream</span></code> subclasses</li>
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream.decoded_length</span></code> - the number of items (tuples, integers) in decoded data</li>
</ul>
</div></blockquote>
<p>The two main subclasses of <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraDataStream</span></code> are <a class="reference internal" href="ahds.html#ahds.data_stream.AmiraMeshDataStream" title="ahds.data_stream.AmiraMeshDataStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraMeshDataStream</span></code></a>, which is a concrete class representing all AmiraMesh data streams, and <a class="reference internal" href="ahds.html#ahds.data_stream.AmiraHxSurfaceDataStream" title="ahds.data_stream.AmiraHxSurfaceDataStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraHxSurfaceDataStream</span></code></a>, which abstractly defines HyperSurface data streams.</p>
<p>There are two main AmiraHxSurfaceDataStream subclasses:</p>
<ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.VoidDataStream</span></code> represents <a class="reference internal" href="ahds.html#ahds.data_stream.AmiraHxSurfaceDataStream" title="ahds.data_stream.AmiraHxSurfaceDataStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraHxSurfaceDataStream</span></code></a> data streams that only have a name and value but no actual encoded data (on the following line). There are two subclasses:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.NamedDataStream</span></code> subclasses have a strings after data stream name. The two concrete subclasses are:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.PatchesInnerRegionDataStream</span></code> for the name of an inner region of a patch (see <code class="xref py py-class docutils literal notranslate"><span class="pre">PatchesDataStream</span></code>), and</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.PatchesOuterRegionDataStream</span></code> for corresponding name of the outer region of a patch.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.ValuedDataStream</span></code> have an integer value after the data stream name. The three concrete subclasses are:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.PatchesBoundaryIDDataStream</span></code> hold the boundary ID of a patch,</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.PatchesBranchingPointsDataStream</span></code> stores the number of branching points, and</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.PatchesDataStream</span></code> with the number of patches, which is a special <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.ValueDataStream</span></code> that contains an iterable of patches each containing a <code class="docutils literal notranslate"><span class="pre">Patches&lt;X&gt;DataStream</span></code> objects.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.LoadedDataStream</span></code> represent <a class="reference internal" href="ahds.html#ahds.data_stream.AmiraHxSurfaceDataStream" title="ahds.data_stream.AmiraHxSurfaceDataStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraHxSurfaceDataStream</span></code></a> data streams that have a name, a value and encoded data. The two main concrete subclasses are:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.VerticesDataStream</span></code> represents data streams with float-triples, and</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.PatchesTrianglesDataStream</span></code> represents data streams within a patch with triples of 1-based indices (triangles) of vertices specified in the <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.VerticesDataStream</span></code>.</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="conversion-classes">
<h5><a class="toc-backref" href="#id20">Conversion classes</a><a class="headerlink" href="#conversion-classes" title="Permalink to this headline">¶</a></h5>
<p>There are two groups of conversion classes which only apply to (some) AmiraMesh data streams:
Conversion classes</p>
<ul class="simple">
<li>Image conversion classes consist of a image container class <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.ImageSet</span></code> and an <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.Image</span></code> class. ImageSet objects that can be iterated to give <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.Image</span></code> objects are returned from the <code class="xref py py-meth docutils literal notranslate"><span class="pre">ahds.data_stream.AmiraMeshDataStream.to_images()</span></code> method call.</li>
</ul>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># decode the data stream to images</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">images</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">to_images</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">images</span>
<span class="go">&lt;ImageSet with 200 images&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span> <span class="n">image</span>
<span class="gp">...</span>
<span class="go">&lt;Image with dimensions (971, 862)&gt;</span>
<span class="go">&lt;Image with dimensions (971, 862)&gt;</span>
<span class="go">&lt;Image with dimensions (971, 862)&gt;</span>
<span class="gp">...</span>
<span class="go">&lt;Image with dimensions (971, 862)&gt;</span>
<span class="go">&lt;Image with dimensions (971, 862)&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>Contour conversion classes convert individual images into sets of contours (<code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.ContourSet</span></code>) iterable as individual <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.Contours</span></code> objects. They are obtained from calls to the <code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.Image.as_contours</span></code> property. Furthermore, the <code class="xref py py-attr docutils literal notranslate"><span class="pre">ahds.data_stream.Image.as_segments</span></code> property call returns a dictionary of the corresponding <code class="xref py py-class docutils literal notranslate"><span class="pre">ahds.data_stream.ContourSet</span></code> object indexed by the <em>z</em> plane.</li>
</ul>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># contours per image</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># the dictionary key is the Amira Id for the segment (the Id of the Material)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># a segment can have several non-overlapping contours (or polylines)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span> <span class="n">image</span><span class="o">.</span><span class="n">as_contours</span>
<span class="gp">...</span>
<span class="go">{2: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 15 contours, 3: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 3 contours, 5: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 2 contours}</span>
<span class="go">{2: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 18 contours, 3: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 3 contours, 5: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 2 contours}</span>
<span class="gp">...</span>
<span class="go">{2: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 15 contours, 3: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 1 contours, 5: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 3 contours}</span>
<span class="go">{2: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 15 contours, 3: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 1 contours, 5: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 3 contours}</span>


<span class="gp">&gt;&gt;&gt; </span><span class="c1"># separate individual segments</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">images</span><span class="o">.</span><span class="n">segments</span>
<span class="go">{1: {110: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 1 contours}, 2: {0: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 15 contours, 1: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 18 contours, ..., 198: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 3 contours, 199: &lt;class &#39;ahds.data_stream.ContourSet&#39;&gt; with 3 contours}}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ahds.html" class="btn btn-neutral float-right" title="ahds package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="ahds package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, EMBL-EBI

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>